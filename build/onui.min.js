/**
 * @description Onui
 * @about       Lightweight JavaScript UI library.
 * @author      Stephens Nunnally <@stevinz>
 * @license     MIT - Copyright (c) 2021-2022 Stephens Nunnally and Scidian Studios
 * @source      https://github.com/onsightengine/onui
 */
const t='<?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg width="100%" height="100%" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><path d="M373.189,648.684c-0,-0 -237.09,-138.996 -258.087,-117.999c-20.997,20.997 212.331,288.419 212.331,288.419c1.975,3.009 4.284,5.857 6.926,8.499c10.698,10.698 24.796,15.945 38.83,15.71c14.035,0.235 28.132,-5.012 38.831,-15.71c2.641,-2.642 4.95,-5.49 6.926,-8.499c-0,-0 423.255,-489.7 496.91,-611.246c9.004,-14.859 -15.991,-40.415 -34.446,-27.458c-108.024,75.837 -508.221,468.284 -508.221,468.284Z" style="fill:#ebebeb;"/></svg>',e='<?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg width="100%" height="100%" viewBox="0 0 512 512" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><circle cx="256" cy="256" r="256" style="fill:#e24c4b;"/><path d="M354.658,492.268c-30.37,12.709 -63.7,19.732 -98.659,19.732c-141.29,-0 -255.999,-114.71 -255.999,-256c-0,-29.773 5.092,-58.365 14.455,-84.951c-0.306,5.601 -0.022,11.26 -0.461,16.921c-13.988,180.322 123.333,317.446 306.218,306.217c11.622,-0.713 23.138,-0.652 34.446,-1.919Z" style="fill-opacity:0.25;"/><path d="M386.574,400.264c-12.566,12.566 -33.512,12.566 -46.079,0l-84.496,-84.496l-84.496,84.496c-12.567,12.566 -33.513,12.566 -46.079,0c-12.566,-12.567 -12.566,-33.513 -0,-46.079l84.496,-84.496l-84.496,-84.496c-12.566,-12.567 -12.566,-33.513 -0,-46.079c12.566,-12.567 261.15,215.071 261.15,215.071c12.566,12.566 12.566,33.511 -0,46.079Z" style="fill-opacity:0.25;"/><path d="M386.575,386.834c-12.567,12.568 -33.513,12.568 -46.079,0.002l-84.496,-84.498l-84.497,84.498c-12.566,12.566 -33.512,12.566 -46.079,-0c-12.566,-12.568 -12.566,-33.513 -0,-46.079l84.497,-84.496l-84.497,-84.498c-12.566,-12.566 -12.566,-33.511 -0,-46.079c12.567,-12.565 33.513,-12.565 46.079,0l84.496,84.498l84.497,-84.498c12.566,-12.565 33.512,-12.565 46.079,0c12.566,12.568 12.566,33.513 -0,46.079l-84.497,84.496l84.497,84.498c12.566,12.566 12.566,33.51 -0,46.077Z" style="fill:#fff;"/></svg>',s='<?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg width="100%" height="100%" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"></svg>',i="0.3em";class n{static getVariable(t){const e=document.querySelector(":root");return getComputedStyle(e).getPropertyValue(t)}static setVariable(t,e){document.querySelector(":root").style.setProperty(t,e)}static baseSize(){return parseFloat(getComputedStyle(document.querySelector(":root")).fontSize)}static fontSize(){return parseFloat(getComputedStyle(document.body).fontSize)}static guiScale(){return n.fontSize()/n.baseSize()}static getTextWidth(t,e){const s=document.createElement("canvas").getContext("2d");return s.font=e,s.measureText(t).width}static getFontCssFromElement(t=document.body){return`${getComputedStyle(t).fontWeight||"normal"} ${getComputedStyle(t).fontSize||"16px"} ${getComputedStyle(t).fontFamily||"Arial"}`}static parseSize(t){return("string"==typeof t||t instanceof String)&&(t.includes("px")||t.includes("%")||t.includes("em")||t.includes("rem")||t.includes("ch")||t.includes("ex")||t.includes("cap")||t.includes("vw")||t.includes("vh")||t.includes("vmin")||t.includes("vmax"))?t:parseInt(t)+"px"}static toEm(t){const e=n.parseSize(t);return e.includes("px")?parseFloat(e)/10/n.guiScale()+"em":e.includes("em")?e:(console.warn(`Css.toEm: Could not convert to em! Unit passed in: ${t}`),size)}static toPx(t){const e=n.parseSize(t);return e.includes("px")?e:e.includes("rem")?parseInt(10*parseFloat(t))+"px":e.includes("em")?parseInt(10*parseFloat(t)*n.guiScale())+"px":(console.warn(`Css.toPx: Could not convert to pixels! Unit passed in: ${t}`),t)}}const o={LEFT:"left",CENTER:"center",MIDDLE:"center",RIGHT:"right"},r={LEFT:"left",RIGHT:"right"},a={OVER:"over",UNDER:"under"};class d{static getLeft(t){return t.getBoundingClientRect().left}static getTop(t){return t.getBoundingClientRect().top}static getWidth(t){return t.offsetWidth}static getHeight(t){return t.offsetHeight}static popOver(t,e,s=o.LEFT,i=0,n=0,l=r.RIGHT){return d.popOverUnder(t,e,a.OVER,s,i,n,l)}static popUnder(t,e,s=o.LEFT,i=0,n=0,l=r.RIGHT){return d.popOverUnder(t,e,a.UNDER,s,i,n,l)}static popOverUnder(t,e,s=a.UNDER,i=o.LEFT,l=0,h=0,c=r.RIGHT){let u=window.innerWidth-4,m=window.innerHeight-4;l=l?parseInt(n.toPx(l),10):0,h=h?parseInt(n.toPx(h),10):0;let p=d.getLeft(e)+l;if(i===o.CENTER){p=d.getLeft(e)+(d.getWidth(e)-d.getWidth(t))/2+l}else if(i===o.RIGHT){p=d.getLeft(e)+(d.getWidth(e)-d.getWidth(t))+l}c===r.LEFT&&(u=d.getLeft(e)+d.getWidth(e));let g=p+d.getWidth(t);g>u&&(p-=g-u),p<4&&(p=4);let v=d.getTop(e)+d.getHeight(e)+h,f=d.getTop(e)-d.getHeight(t)-h,w=v+d.getHeight(t);w>m&&(s=a.OVER),f<4&&(s=a.UNDER);let C=s===a.UNDER?v:f;return s===a.UNDER&&(w=C+d.getHeight(t),w>m&&(C=m-d.getHeight(t),C<4&&(C=4))),t.style.left=n.toPx(p),t.style.top=n.toPx(C),s}}class l{static isChildOf(t,e){t.isElement&&t.dom&&(t=t.dom);let s=t.parentElement;for(;s;){if(s.isSameNode(e))return!0;s=s.parentElement}return!1}static isChildOfElementWithClass(t,e){t.isElement&&t.dom&&(t=t.dom);let s=t.parentElement;for(;s;){if(s.classList.contains(e))return!0;s=s.parentElement}return!1}static parentElementWithClass(t,e){t.isElement&&t.dom&&(t=t.dom);let s=t.parentElement;for(;s;){if(s.classList.contains(e))return s;s=s.parentElement}}static parentScroller(t){return t?(t.isElement&&t.dom&&(t=t.dom),t.scrollHeight>t.clientHeight?t:l.parentScroller(t.parentElement)):null}static scrollIntoView(t){const e=l.parentScroller(t);if(e){const s=parseInt(n.toPx("0.2em"));t.offsetTop-e.offsetTop-s<e.scrollTop?e.scrollTop=t.offsetTop-e.offsetTop-s:t.offsetTop>e.scrollTop+e.clientHeight+s-e.offsetTop&&(e.scrollTop=t.offsetTop-e.clientHeight+t.offsetHeight+s-e.offsetTop)}}static traverse(t,e=(()=>{}),s=!0){t.isElement&&t.dom&&(t=t.dom),s&&e(t);for(let s=0;s<t.children.length;s++)l.traverse(t.children[s],e,!0)}}class h{constructor(t){const e=this;this.isElement=!0,this.dom=t,this.name=void 0,this.contents=function(){return e},this.children=[]}add(){for(let t=0;t<arguments.length;t++){const e=arguments[t];if(e instanceof h&&e.isElement){this.contents().dom.appendChild(e.dom);let t=!1;for(let s=0;s<this.contents().children.length;s++)if(this.contents().children[s].dom.isSameNode(e.dom)){t=!0;break}t||this.contents().children.push(e),e.parent=this}else console.error("Element.add:",e,"is not an instance of Onui Element.")}return this}static remove(t,e){if(e&&e.isElement)for(let s=0;s<t.children.length;s++){const i=t.children[s];if(e.dom.isSameNode(i.dom))return h.clear(e),t.children.splice(j,1),!0}try{return t.dom.removeChild(e),h.clear(e),!0}catch(t){}return!1}remove(){for(let t=0;t<arguments.length;t++){const e=arguments[t];let s=h.remove(this.contents(),e);s||(s=h.remove(this,e)),s||console.log("Element.remove: Could not remove child!")}return this}static clear(t,e=!0){if(t){if(t.isElement){for(let e=0;e<t.children.length;e++){const s=t.children[e];h.clear(s)}t.children.length=0,s(t.dom)}else s(t);e&&(t.dispose&&"function"==typeof t.dispose&&t.dispose(),t.dom&&t.dom.dispose&&"function"==typeof t.dom.dispose&&t.dom.dispose())}function s(t){if(t.children)for(let e=t.children.length-1;e>=0;e--){const s=t.children[e];h.clear(s);try{t.removeChild(s)}catch(t){}}}}clearContents(){return h.clear(this.contents(),!1),this}clear(){return h.clear(this),this}setClass(t){return this.dom.className=t,this}addClass(t){return this.dom.classList.add(t),this}hasClass(t){return this.dom.classList.contains(t)}hasClassWithString(t){t=String(t).toLowerCase();const e=[...this.dom.classList];for(let s=0;s<e.length;s++){if(e[s].toLowerCase().includes(t))return!0}return!1}removeClass(){for(let t=0;t<arguments.length;t++){const e=arguments[t];this.dom.classList.remove(e)}return this}setId(t){return this.dom.id=t,void 0===this.name&&(this.name=t),this}getId(){return this.dom.id}setName(t){return this.name=t,this}getName(){return void 0===this.name?"No name":this.name}setAttribute(t,e){this.dom.setAttribute(t,e)}setDisabled(t){return this.dom.disabled=t,this}selectable(t){return t?this.removeClass("Unselectable"):this.addClass("Unselectable"),this}getInnerText(){return this.contents().dom.innerText}setInnerText(t){return null!=t&&(this.contents().dom.innerText=t),this}setInnerHtml(t){return null!=t&&(this.contents().dom.innerHTML=t),this}getInnerHtml(){return this.contents().dom.innerHTML}setTextContent(t){return null!=t&&(this.contents().dom.textContent=t),this}getTextContent(){return this.contents().dom.textContent}setStyle(){for(let t=0,e=arguments.length;t<e;t+=2){const e=arguments[t],s=arguments[t+1];this.dom.style[e]=s}return this}setContentsStyle(){for(let t=0,e=arguments.length;t<e;t+=2){const e=arguments[t],s=arguments[t+1];this.contents().dom.style[e]=s}return this}getLeft(){return this.dom.getBoundingClientRect().left}getTop(){return this.dom.getBoundingClientRect().top}getWidth(){return this.dom.getBoundingClientRect().width}getHeight(){return this.dom.getBoundingClientRect().height}traverse(t,e=!0){if(e&&t(this),this.children)for(let e=0;e<this.children.length;e++)this.children[e].traverse(t,!0)}}["display","flex","overflow","visibility","position","left","top","right","bottom","width","height","color","opacity","cursor","pointerEvents"].forEach((function(t){const e="set"+t.substring(0,1).toUpperCase()+t.substring(1,t.length);h.prototype[e]=function(e){return this.setStyle(t,e),this}})),Object.defineProperties(h.prototype,{id:{get:function(){return this.getId()},set:function(t){this.setId(t)}}});["Change","Input","KeyUp","KeyDown","Click","DblClick","PointerDown","PointerMove","PointerUp","PointerEnter","PointerLeave","PointerOut","PointerOver","PointerCancel"].forEach((function(t){const e="on"+t;h.prototype[e]=function(e){return this.dom.addEventListener(t.toLowerCase(),e.bind(this),!1),this}}));class c extends h{constructor(t){super(document.createElement("div")),this.setInnerHtml(t)}}const u=1,m=2;let p;const g=new class{constructor(){const t=(new c).setClass("Tooltip").setInnerHtml("");document.body.appendChild(t.dom);let e=u;function s(e){const s=e.target;s&&s instanceof HTMLElement&&s.getAttribute("tooltip")&&(clearTimeout(p),t.removeClass("Updated"))}document.addEventListener("touchstart",(()=>e=m),{capture:!0,passive:!0}),document.addEventListener("mousemove",(()=>e=u),{capture:!0,passive:!0}),document.addEventListener("mouseenter",(function(s){const r=s.target;if(!(r&&r instanceof HTMLElement))return;if(!r.getAttribute("tooltip"))return;if(s instanceof FocusEvent&&e!==u)return;if("TouchEvent"in window&&s instanceof TouchEvent)return;let a=r.getAttribute("tooltip");if(!a.length)return;clearTimeout(p),t.removeClass("Updated"),p=setTimeout((()=>{t.setInnerHtml(a),d.popUnder(t.dom,r,o.CENTER,null,i),t.addClass("Updated")}),parseInt(n.getVariable("--tooltip-delay")))}),{capture:!0,passive:!0}),document.addEventListener("hidetooltip",s,{capture:!0,passive:!0}),document.addEventListener("mouseleave",s,{capture:!0,passive:!0}),document.addEventListener("blur",s,{capture:!0,passive:!0})}};class v extends h{constructor(){super(document.createElement("br"))}}class f extends h{constructor(t,e=null,s=null,i=!1){const o=document.createElement("img");function r(e){if(("string"==typeof e||e instanceof String)&&(e.includes("<svg")||e.includes("<SVG"))){const t=new Blob([e],{type:"image/svg+xml"}),s=URL.createObjectURL(t);o.src=s,o.addEventListener("load",(()=>URL.revokeObjectURL(s)),{once:!0})}else o.src=t}o.onerror=()=>o.style.visibility="hidden",r(t),i||(o.ondragstart=()=>!1),null!=e&&(o.style.width=n.parseSize(e)),null!=s&&(o.style.height=n.parseSize(s)),super(o),this.setClass("Image"),this.setImage=function(t){r(t)}}}class w extends h{constructor(t){super(document.createElement("span")),this.setInnerHtml(t)}}class C extends w{constructor(t){super(t),this.setClass("Text"),this.setCursor("default")}}class E extends c{constructor(){super(),this.addClass("Row")}}class b extends c{constructor(){super(),this.setClass("VectorBox");let t=arguments;0===arguments.length?t=[s]:1===arguments.length&&Array.isArray(arguments[0])&&(t=arguments[0]);for(let e=0;e<t.length;e++){const s=this.addImage(t[e]);0===e&&(this.img=s)}}addImage(t){void 0!==t&&""!==t||(t=s);const e=new f(t,"100%","100%",!1);return this.add(e),this.img||(this.img=e),e}makeDraggable(){for(let t=0;t<this.contents().children.length;t++)this.contents().children[t].dom.ondragstart=()=>{}}setImage(t){this.img.setImage(t)}}const x={HALF:"half",THIRD:"third"};class y extends c{constructor(t=x.HALF){super(),this.addClass("PropertyList"),this.setStyle("display","block"),this.rowSizing=t,this.setRowSizeHalfs=function(){this.rowSizing=x.HALF},this.setRowSizeThirds=function(){this.rowSizing=x.THIRD}}addHeader(t="",e,s=!1){const i=this.createHeader(t,e,s);return this.add(i),i}addRow(t="",...e){const s=this.createRow(t,this.createControls(...e));return this.add(s),s}createHeader(t="",e,s=!1){const i=(new c).setClass("PropertyHeaderTitle"),n=new b(e);return s&&n.addClass("EnlargeIcon"),i.iconHolder=(new w).setClass("PropertyHeaderIcon").add(n),i.textHolder=(new w).setClass("PropertyHeaderText").setTextContent(t),i.add(i.iconHolder,i.textHolder),i}createRow(t="",...e){const s=this.createControls(...e),i=new C(t).selectable(!1).addClass("PropertyLeft");this.rowSizing===x.THIRD?(i.addClass("PropertyLeftThird"),s.addClass("PropertyRightThird")):(i.addClass("PropertyLeftHalf"),s.addClass("PropertyRightHalf"));const n=(new E).addClass("PropertyRow").add(i,s);return n.leftWidget=i,n.rightWidget=s,n}createControls(){const t=(new E).setStyle("margin","0","padding","0").addClass("PropertyRight");let e=arguments;1===arguments.length&&Array.isArray(arguments[0])&&(e=arguments[0]);for(let s=0;s<e.length;s++){const i=e[s];i instanceof h&&i.isElement?(t.add(i),s<e.length-1&&t.add((new w).addClass("PropertySpace"))):console.error("PropertyList.createRight():",i,"is not an instance of Onui Element.")}return t}}class T extends c{constructor(t=!1){super();const e=this;function s(t){if(e.multiSelect){if(t.shiftKey||(e._shiftAdd=0,e._shiftTrack=[]),38===t.keyCode||40===t.keyCode){t.preventDefault(),t.stopPropagation();let s=[...e.selectedValues];if(t.shiftKey){0===e._shiftTrack.length&&(e._shiftTrack=[...s]),s=[...e._shiftTrack];let i=s[s.length-1],n=e.getIndex(i);if(-1===n)return;if(38===t.keyCode&&n+e._shiftAdd>0&&e._shiftAdd--,40===t.keyCode&&n+e._shiftAdd<e.options.length-1&&e._shiftAdd++,n+=e._shiftAdd,n<0||n>e.options.length-1)return;const o=e.getIndex(s[s.length-1]),r=n;if(o<r)for(let t=o;t<=r;t++){const i=e.options[t].value;s.includes(i)||s.push(i)}else for(let t=o;t>=r;t--){const i=e.options[t].value;s.includes(i)||s.push(i)}e.setValues(s,!0),e.dom.dispatchEvent(new Event("change"))}else if(s.length>0){let i=s[s.length-1],n=e.getIndex(i);if(-1===n)return;38===t.keyCode&&n--,40===t.keyCode&&n++,n>=0&&n<e.options.length&&(e.setValues([e.options[n].value],!0),e.dom.dispatchEvent(new Event("change")))}}}else if(38===t.keyCode||40===t.keyCode){t.preventDefault(),t.stopPropagation();let s=e.getIndex(e.selectedValue);if(-1===s)return;38===t.keyCode&&s--,40===t.keyCode&&s++,s>=0&&s<e.options.length&&(e.setValue(e.options[s].value,!0),e.dom.dispatchEvent(new Event("change")))}}function i(t){switch(t.keyCode){case 38:case 40:t.preventDefault(),t.stopPropagation(),t.shiftKey||(e._shiftAdd=0,e._shiftTrack=[])}}this.setClass("TreeList"),this.dom.tabIndex=0,this.multiSelect=t,this.options=[],this.selectedValue=null,this.selectedValues=[],this._shiftAdd=0,this._shiftTrack=[],this.dom.addEventListener("keydown",s),this.dom.addEventListener("keyup",i),this.dispose=function(){this.dom.removeEventListener("keydown",s),this.dom.addEventListener("keydown",i)}}getIndex(t){for(let e=0;e<this.options.length;e++)if(this.options[e].value===t)return e;return-1}getValue(){return this.selectedValue}setValue(t,e=!1){let s;for(let t=0;t<this.options.length;t++)this.options[t].classList.remove("Active");for(let e=0;e<this.options.length;e++){const i=this.options[e];parseInt(i.value)===parseInt(t)&&(i.classList.add("Active"),s=i)}return s&&e&&setTimeout((()=>l.scrollIntoView(s)),0),this.selectedValue=t,this}getValues(){return this.selectedValues}setValues(t,e=!1){let s;for(let t=0;t<this.options.length;t++)this.options[t].classList.remove("Active"),this.options[t].classList.remove("ActiveTop"),this.options[t].classList.remove("ActiveBottom");for(let e=0;e<t.length;e++){const i=t[e];for(let t=0;t<this.options.length;t++){const e=this.options[t];parseInt(e.value)===parseInt(i)&&(e.classList.add("Active"),s=e)}}for(let t=0;t<this.options.length-1;t++){const e=this.options[t],s=this.options[t+1];e.classList.contains("Active")&&s.classList.contains("Active")&&(e.classList.add("ActiveTop"),s.classList.add("ActiveBottom"))}return s&&e&&setTimeout((()=>l.scrollIntoView(s)),0),this.selectedValues=[...t],this}setOptions(t){const e=this;function s(t){if(t.shiftKey||(e._shiftAdd=0,e._shiftTrack=[]),e.multiSelect){let s=[...e.selectedValues];if(t.altKey||t.ctrlKey||t.metaKey){if(s.includes(this.value)){const t=s.indexOf(this.value);s.splice(t,1)}else s.push(this.value);e.setValues(s)}else if(t.shiftKey&&s.length>0){0===e._shiftTrack.length&&(e._shiftTrack=[...e.selectedValues]),s=[...e._shiftTrack];const t=e.getIndex(s[s.length-1]),i=e.getIndex(this.value);if(t<i)for(let n=t;n<=i;n++){const t=e.options[n].value;s.includes(t)||s.push(t)}else for(let n=t;n>=i;n--){const t=e.options[n].value;s.includes(t)||s.push(t)}e._shiftAdd=i-t,e.setValues(s)}else e.setValues([this.value])}else e.setValue(this.value);const s=new Event("change");e.dom.dispatchEvent(s)}let i;function n(){i=this}function o(t){t.dataTransfer.setData("text/plain",this.value)}function r(t){if(!i||this===i)return;const e=t.offsetY/this.clientHeight;this.className="Option Drag",e<.25&&(this.className="Option DragTop"),e>.75&&(this.className="Option DragBottom")}function a(){i&&this!==i&&(this.className="Option")}function d(t){t.preventDefault(),t.stopPropagation(),i&&this!==i&&(this.className="Option",e.onDrop&&"function"==typeof e.onDrop&&e.onDrop(t,this,i),i=void 0)}this.clearContents(),e.options=[];for(let i=0;i<t.length;i++){const l=t[i];l.className="Option",e.dom.appendChild(l),e.options.push(l),l.addEventListener("pointerdown",s),!0===l.draggable&&(l.addEventListener("drag",n),l.addEventListener("dragstart",o),l.addEventListener("dragover",r),l.addEventListener("dragleave",a),l.addEventListener("drop",d)),l.dispose||(l.dispose=function(){l.removeEventListener("pointerdown",s),!0===l.draggable&&(l.removeEventListener("drag",n),l.removeEventListener("dragstart",o),l.removeEventListener("dragover",r),l.removeEventListener("dragleave",a),l.removeEventListener("drop",d))})}return this}}class L extends h{constructor(t){super(document.createElement("button"));const e=this;this.setClass("Button"),this.dom.innerHTML=t??"",this.attachedMenu=void 0,this.menuOffsetX=0,this.menuOffsetY=0,this.alignMenu=o.LEFT,this.overflowMenu=r.RIGHT,Object.defineProperty(this,"disabled",{get:function(){return!this.dom||this.dom.disabled},set:function(t){this.dom&&(this.dom.disabled=t)}}),this.dom.addEventListener("pointerdown",(()=>{const t=new Event("hidetooltip",{bubbles:!0});e.dom.dispatchEvent(t)}),!1)}attachMenu(t){const e=this;if(!1===t.hasClass("Menu"))return this;this.addClass("MenuButton"),this.attachedMenu=t,document.body.appendChild(t.dom),this.dom.addEventListener("pointerdown",i,!1);function s(){d.popUnder(t.dom,e.dom,e.alignMenu,e.menuOffsetX,e.menuOffsetY,e.overflowMenu)===a.UNDER?(t.removeClass("SlideUp"),t.addClass("SlideDown")):(t.removeClass("SlideDown"),t.addClass("SlideUp"))}function i(i){!1===e.hasClass("Selected")&&(e.addClass("Selected"),s(),e.dom&&t.showMenu(e.dom))}new MutationObserver(((t,e)=>{document.contains(this.dom)&&(s(),e.disconnect())})).observe(document,{attributes:!1,childList:!0,characterData:!1,subtree:!0}),window.addEventListener("resize",s,!1),this.detachMenu=function(){!1!==e.hasClass("MenuButton")&&(e.removeClass("MenuButton"),window.removeEventListener("resize",s,!1),e.dom.removeEventListener("pointerdown",i,!1),e.attachedMenu.clear(),document.body.removeChild(e.attachedMenu.dom),e.attachedMenu=void 0)}}dispose(){this.attachedMenu&&this.detachMenu()}}class S extends h{constructor(t){super(document.createElement("label")),this.setClass("Checkbox"),this.checkbox=new h(document.createElement("input")).addClass("CheckboxInput"),this.checkbox.dom.type="checkbox";let e=(new c).addClass("CheckboxButton");this.add(this.checkbox,e),this.setValue(t)}getValue(){if(this.checkbox.dom)return this.checkbox.dom.checked}setValue(t){return this.checkbox.dom?(this.checkbox.dom.checked=!!t,this):this}}class I extends L{constructor(){super();const t=this;this.addClass("ColorButton"),this.addClass("DropArrow");const e=new h(document.createElement("input"));e.addClass("ColorInputButton"),e.dom.setAttribute("autocomplete","off");try{e.dom.type="color"}catch(t){}this.add(e);const s=(new c).addClass("DropColor");function i(e){t.addClass("Selected")}function n(i){s.setStyle("backgroundColor",e.dom.value),t.dom.setAttribute("tooltip",e.dom.value)}function o(){t.removeClass("Selected")}s.setStyle("backgroundColor",e.dom.value),this.add(s),e.dom.addEventListener("pointerdown",i),e.dom.addEventListener("input",n),e.dom.addEventListener("blur",o),this.getValue=function(){return e.dom?e.dom.value:0},this.getHexValue=function(){return e.dom?parseInt(e.dom.value.substring(1),16):0},this.setValue=function(i){return e.dom?(e.dom.value=i,s.setStyle("backgroundColor",e.dom.value),t.dom.setAttribute("tooltip",e.dom.value),this):this},this.setHexValue=function(s){return e.dom?(void 0===s||t.setValue("#"+("000000"+s.toString(16)).slice(-6)),this):this},this.setHexValue(16777215),this.dispose=function(){e.dom.removeEventListener("pointerdown",i),e.dom.removeEventListener("input",n),e.dom.removeEventListener("blur",o)}}}class M extends c{constructor(){super(),this.setClass("Menu"),this.mouseSvg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.mouseSvg.setAttribute("class","MenuMouseTriangle"),this.mouseSvg.setAttribute("pointer-events","none"),this.mouseSvg.setAttribute("version","1.1"),this.mouseArea=document.createElementNS("http://www.w3.org/2000/svg","polygon"),this.mouseArea.setAttribute("fill","aqua"),this.mouseArea.setAttribute("opacity","0.0"),this.mouseArea.setAttribute("pointer-events","fill"),this.mouseSvg.appendChild(this.mouseArea)}isShown(){return this.hasClass("MenuShow")}showMenu(t){const e=this;if(this.addClass("MenuShow"),this.clickCount=0,l.isChildOfElementWithClass(this.dom,"Menu")){this.mouseArea.setAttribute("pointer-events","none"),this.contents().dom.appendChild(this.mouseSvg);let t=1e3*parseFloat(n.getVariable("--menu-timing"));setTimeout((()=>{this.updateMouseArea()}),t)}function s(t){let s=!0;if(e.dom.contains(t.target)){let e=t.target,i=e.classList;for(;e.parentElement&&!1===i.contains("Menu")&&!1===i.contains("MenuItem");)e=e.parentElement,i=e.classList;(i.contains("MenuItem")&&i.contains("SubMenuItem")||i.contains("KeepOpen"))&&(s=!1,t.target&&"input"!==t.target.tagName.toLowerCase()&&t.preventDefault())}s&&e.clickCount++,1===e.clickCount&&(s=!1),s&&(e.closeMenu(),window.signals&&signals.guiLostFocus.dispatch())}function i(t){if("Escape"===t.code)e.closeMenu()}return this.closeMenu=function(e=!0,n){if(this.traverse((t=>{n&&l.isChildOf(t.dom,n)||(t.removeClass("MenuShow","Selected"),t.attachedMenu&&t.attachedMenu.closeMenu&&t.attachedMenu.closeMenu(!0),t.dom&&t.dom.blur&&t.dom.blur())}),e),e){let e=t;for(;e;)t.classList.contains("MenuButton")?(e.classList.remove("Selected"),e=void 0):e=e.parentElement;t.classList.contains("MenuButton")&&(document.removeEventListener("pointerdown",s),document.removeEventListener("keydown",i))}},t.classList.contains("MenuButton")&&(document.addEventListener("pointerdown",s,!1),document.addEventListener("keydown",i,!1)),this}updateMouseArea(){let t=this.dom.parentElement.getBoundingClientRect(),e=this.dom.getBoundingClientRect(),s=t.top-e.top+t.height/2,i=s-t.height/2,n=s+t.height/2,o=t.width/3;this.mouseSvg.style.left=`-${o}px`,this.mouseSvg.style.top="-10px",this.mouseSvg.setAttribute("width",`${this.getWidth()+o}px`),this.mouseSvg.setAttribute("height",`${this.getHeight()+20}px`);let r=`${o},0`,a=`0,${10+i}`,d=`0,${10+n}`,l=`${o},${this.getHeight()+20}`;return this.mouseArea.setAttributeNS(null,"points",`${r} ${a} ${d} ${l}`),this.mouseArea.setAttribute("pointer-events","fill"),this}}class k extends c{constructor(t){super(),this.setClass("MenuShortcut"),t&&this.setShortcutText(t)}setShortcutText(t){if(!t)return this;this.text=t,this.clear();for(let e=0;e<t.length;e++){let s=(new c).setClass("MenuShortcutCharacter"),i=t[e];for(;e+1<t.length&&t[e+1]===t[e+1].toLowerCase();)i+=t[e+1],e++;1===i.length?s.setWidth("1em"):(s.setStyle("paddingLeft","0.15em"),s.setStyle("paddingRight","0.15em")),s.dom.innerHTML=i,this.add(s)}return this}}class D extends c{constructor(t,e,s){super(),this.setClass("MenuItem"),this.setName(t),this.divIcon=new b(e),this.divIconHolder=(new c).add(this.divIcon).setClass("MenuIcon"),this.divText=(new c).setClass("MenuText"),this.divSpacer=(new c).setStyle("flex","1 1 auto"),this.divShortcut=new k(s),this.add((new E).add(this.divIconHolder,this.divText,this.divSpacer,this.divShortcut)),this.checked=!1,this.disabled=!1,this.subMenu=void 0,this.dom.addEventListener("contextmenu",(function(t){t.preventDefault()})),this.onPointerEnter((t=>{let e=this.parent;for(;e&&!1===e.hasClass("Menu");)e=e.parent;e&&e.closeMenu&&e.closeMenu(!1,this.dom),this.subMenu?.showMenu(this.dom)})),this.setText(t),this.selectable(!1)}isChecked(){return this.checked}isDisabled(){return this.disabled}keepOpen(){return this.addClass("KeepOpen"),this}setChecked(e){const i=e?t:s;return e?this.divIcon.addClass("IconColorize"):this.divIcon.removeClass("IconColorize"),this.setImage(i),this.checked=e,this}setDisabled(t){return t?this.addClass("Disabled"):this.removeClass("Disabled"),this.disabled=t,this}setImage(t){return this.divIcon.setImage(t),this}setText(t){let e=t||" ";return this.divText.dom.innerHTML=e,this}attachSubMenu(t){return!1===t.hasClass("Menu")||(t.addClass("SlideDown"),this.removeSubMenu(),this.addClass("SubMenuItem"),this.add(t),this.subMenu=t),this}hasSubMenu(){return this.hasClass("SubMenuItem")}removeSubMenu(){this.removeClass("SubMenuItem");const t=this.subMenu;this.subMenu=void 0;for(let t=this.contents().dom.children.length-1;t>=0;t--){let e=this.contents().dom.children[t];e.classList.contains("Menu")&&this.remove(e)}return t}}class H extends L{constructor(t){super(t=t??"&nbsp");const e=this;this.items=[],this.value=void 0,this.menuOffsetX=0,this.menuOffsetY=5,this.addClass("Dropdown"),this.addClass("DropArrow"),this.dom.addEventListener("wheel",(function(t){t.preventDefault(),t.deltaY;let s=e.getValue();if(null==s)return;let i=e.getItemByKey(s);if(!i)return;let n=e.items.indexOf(i);-1!==n&&(t.deltaY<0?n>0&&(n-=1,e.setValue(e.items[n].value),e.dom&&e.dom.dispatchEvent(new Event("change"))):n<e.items.length-1&&(n+=1,e.setValue(e.items[n].value),e.dom&&e.dom.dispatchEvent(new Event("change"))))}),!1)}getItemByKey(t){for(let e=0;e<this.items.length;e++)if(this.items[e].value===t)return this.items[e]}getValue(){return this.value}setValue(t){if(t=String(t),this.value!==t)for(let e=0;e<this.items.length;e++){let s=this.items[e];if(s.value===t){for(let t=0;t<this.items.length;t++)this.items[t].setChecked(!1);return s.setChecked(!0),this.value=t,this.dom&&(this.dom.innerHTML=s.dom.innerText),this}}return this}setOptions(t){this.detachMenu&&this.detachMenu(),this.items.length=0;for(const e in t){let s=new D(t[e]);s.value=e,this.items.push(s);const i=this;s.onPointerDown((function(){i.setValue(s.value),i.dom&&i.dom.dispatchEvent(new Event("change"))}))}let e=new M;for(let t=0;t<this.items.length;t++)e.add(this.items[t]);this.attachMenu(e),e.addClass("SelectMenu")}}const B=new Event("change",{bubbles:!0,cancelable:!0});class R extends h{constructor(t){super(document.createElement("input"));const e=this;function s(t){e.dom&&e.setValue(e.dom.value)}function i(t){if(t.stopPropagation(),"KeyZ"===t.code&&(t.ctrlKey||t.metaKey))return t.preventDefault(),void(t.shiftKey?editor.redo():editor.undo());switch(t.code){case"Enter":e.dom&&(e.dom.style.cursor="text"),e.dom&&e.dom.blur();break;case"ArrowUp":t.preventDefault(),e.setValue(e.getValue()+e.nudge),e.dom&&e.dom.dispatchEvent(B);break;case"ArrowDown":t.preventDefault(),e.setValue(e.getValue()-e.nudge),e.dom&&e.dom.dispatchEvent(B)}}function n(t){t.stopPropagation()}function o(t){t.preventDefault();const s=t.deltaY<0?-1:1,i=e.getValue()-s*e.step;e.setValue(i),e.dom&&e.dom.dispatchEvent(B)}this.setClass("Number"),this.dom.style.cursor="text",this.dom.value="0.00",this.dom.setAttribute("autocomplete","off"),this.value=0,this.min=-1/0,this.max=1/0,this.precision=3,this.step=.1,this.unit="",this.nudge=1,this.setValue(t),this.dom.addEventListener("keydown",i),this.dom.addEventListener("keyup",n),this.dom.addEventListener("wheel",o),this.dom.addEventListener("change",s),this.dispose=function(){e.dom.removeEventListener("keydown",i),e.dom.removeEventListener("keyup",n),e.dom.removeEventListener("wheel",o),e.dom.removeEventListener("change",s)}}getValue(){return parseFloat(this.value)}setValue(t){let e=parseFloat(t);if(void 0===e||isNaN(e)||!isFinite(e))return this;e<this.min&&(e=this.min),e>this.max&&(e=this.max),e=parseFloat(e.toFixed(this.precision));let s=Math.min(this.precision,(i=e,Math.floor(i.valueOf())===i.valueOf()?0:i.toString().split(".")[1].length||0));var i;return e=e.toFixed(s),void 0!==e&&!isNaN(e)&&isFinite(e)&&(this.value=e,this.dom&&(this.dom.value=e),this.dom&&""!==this.unit&&(this.dom.value=e+" "+this.unit)),this}setPrecision(t){return this.precision=t,this}setStep(t){return this.step=t,this}setNudge(t){return this.nudge=t,this}setRange(t,e){return this.min=t,this.max=e,this}setUnit(t){return this.unit=t,this}}class P extends R{constructor(t){super(t);const e=this;this.dom.style.cursor="ns-resize";let s=0,i=0;const n={x:0,y:0},o={x:0,y:0};function r(t){t.preventDefault(),s=0,i=e.getValue(),o.x=t.clientX,o.y=t.clientY}function a(t){const r=e.getValue();let a;n.x=t.clientX,n.y=t.clientY,s+=n.x-o.x-(n.y-o.y),a=i+s/(t.shiftKey?.1:1)*e.step,a=Math.min(e.max,Math.max(e.min,a)),r!==a&&(e.setValue(a),e.dom&&e.dom.dispatchEvent(B)),o.x=t.clientX,o.y=t.clientY}function d(){Math.abs(s)<2&&e.dom&&e.dom.focus()}function l(t){1===t.touches.length&&(s=0,i=e.getValue(),o.x=t.touches[0].pageX,o.y=t.touches[0].pageY)}function h(t){const r=e.getValue();let a;n.x=t.touches[0].pageX,n.y=t.touches[0].pageY,s+=n.x-o.x-(n.y-o.y),a=i+s/(t.shiftKey?5:50)*e.step,a=Math.min(e.max,Math.max(e.min,a)),r!==a&&(e.setValue(a),e.dom&&e.dom.dispatchEvent(B)),o.x=t.touches[0].pageX,o.y=t.touches[0].pageY}function c(t){0===t.touches.length&&Math.abs(s)<2&&e.dom&&e.dom.focus()}function u(){e.dom&&(e.dom.style.cursor="")}function m(){e.dom&&(e.dom.style.cursor="ns-resize")}this.dom.addEventListener("mousedown",r),this.dom.addEventListener("mousemove",a),this.dom.addEventListener("mouseup",d),this.dom.addEventListener("touchstart",l),this.dom.addEventListener("touchmove",h),this.dom.addEventListener("touchend",c),this.dom.addEventListener("focus",u),this.dom.addEventListener("blur",m),this.dispose=function(){this.dom.removeEventListener("mousedown",r),this.dom.removeEventListener("mousemove",a),this.dom.removeEventListener("mouseup",d),this.dom.removeEventListener("touchstart",l),this.dom.removeEventListener("touchmove",h),this.dom.removeEventListener("touchend",c),this.dom.removeEventListener("focus",u),this.dom.removeEventListener("blur",m)}}}const A=new Event("change",{bubbles:!0,cancelable:!0});class V extends c{constructor(t=0,e=0,s=100){super();const i=this;this.setClass("SlideContainer"),this.precision=2;const n=new h(document.createElement("input")).addClass("Slider");n.dom.type="range",n.dom.value=t,n.dom.min=e,n.dom.max=s;const o=new c(" ").addClass("TickMarks");function r(){if(!n.dom)return;const t=n.dom.value,e=n.dom.min,s=n.dom.max;n.dom.style.setProperty("--middle",`${parseFloat((t-e)/(s-e))}`)}function a(t){if(!n.dom)return;t.preventDefault();const e=t.deltaY<0?-1:1,s=parseFloat(n.dom.min),o=parseFloat(n.dom.max);let r=n.dom.step;r="any"===r?Number.isFinite(o)&&Number.isFinite(s)?(o-s)/20:1:parseFloat(r);const a=i.getValue()-e*r;i.setValue(a),n.dom.dispatchEvent(A)}this.slider=n,this.ticks=o,this.add(o,n),n.dom.addEventListener("input",r),n.dom.addEventListener("wheel",a),this.dispose=function(){n.dom.addEventListener("input",r),n.dom.removeEventListener("wheel",a)}}getValue(){return this.slider.dom?parseFloat(this.slider.dom.value):null}setValue(t){if(!this.slider.dom)return this;let e=parseFloat(t);if(void 0===e||isNaN(e)||!isFinite(e))return this;e<this.min&&(e=this.min),e>this.max&&(e=this.max),e=parseFloat(e.toFixed(this.precision));let s=Math.min(this.precision,(i=e,Math.floor(i.valueOf())===i.valueOf()?0:i.toString().split(".")[1].length||0));var i;e=e.toFixed(s),void 0!==e&&!isNaN(e)&&isFinite(e)&&(this.slider.dom.value=e);const n=this.slider.dom.value,o=this.slider.dom.min,r=this.slider.dom.max;return this.slider.dom.style.setProperty("--middle",`${parseFloat((n-o)/(r-o))}`),this}setPrecision(t){return this.precision=t,this}setRange(t,e){return this.slider.dom?(this.slider.dom.min=t,this.slider.dom.max=e,this.setTicks(),this):this}setStep(t){return this.slider.dom?(this.slider.dom.step=t,this.setTicks(),this):this}setTicks(){if(!this.slider.dom)return this;const t=this.ticks,e=this.slider.dom.min,s=this.slider.dom.max,i=this.slider.dom.step;if("any"!==i&&isFinite(e)&&isFinite(s)){const n=parseFloat((s-e)/i),o=9;let r=n;if(r>o)for(let t=1;t<=o;t++)Number.isInteger(n/t)&&(r=t);t.dom.style.setProperty("--divides",`${r}`)}else t.setStyle("display","none")}}class O extends h{constructor(){super(document.createElement("textarea")),this.setClass("TextArea"),this.dom.spellcheck=!1,this.dom.setAttribute("autocomplete","off"),this.dom.addEventListener("keydown",(function(t){if(t.stopPropagation(),9===t.keyCode){t.preventDefault();const e=this.selectionStart;this.value=this.value.substring(0,e)+"\t"+this.value.substring(e),this.selectionStart=e+1,this.selectionEnd=this.selectionStart}}),!1)}getValue(){return this.dom?this.dom.value:null}setValue(t){return this.dom?(this.dom.value=t,this):this}}class F extends h{constructor(t){super(document.createElement("input")),this.setClass("Input"),this.dom.type="text",this.dom.setAttribute("autocomplete","off"),this.dom.setAttribute("spellcheck","false"),this.dom.addEventListener("keydown",(function(t){if(t.stopPropagation(),"KeyZ"===t.code&&(t.ctrlKey||t.metaKey))return t.preventDefault(),void(t.shiftKey?editor.redo():editor.undo())}),!1),this.dom.addEventListener("keyup",(function(t){t.stopPropagation()}),!1),this.setValue(t)}getValue(){return this.dom?this.dom.value:null}setValue(t){return this.dom?(this.dom.value=t,this):this}}class N extends c{constructor(){super(),this.setClass("AbsoluteBox")}}class z extends c{constructor(){super(),this.setClass("ShadowBox");let t=arguments;1===arguments.length&&Array.isArray(arguments[0])&&(t=arguments[0]);for(let e=0;e<t.length;e++){let s=t[e];void 0!==s&&!0===s.isElement?this.add(s):this.add(new b(s))}}noShadow(){return this.addClass("NoShadow"),this}}class _ extends c{constructor(t="",e=!0){super(),this.setClass("AssetBox"),this.dom.tabIndex=0,e&&this.addClass("MiniAssetBox"),""!==t&&this.dom.setAttribute("tooltip",t),("string"==typeof t||t instanceof String)&&""!==t||(t="Unknown"),this.setName(t.toLowerCase());const s=new z;s.dom.draggable=!0,this.add(s),this.contents=function(){return s}}}class W extends c{constructor(){super(),this.setStyle("flexBasis","100%"),this.setStyle("flexGrow","1"),this.setStyle("height","0")}}const U={NONE:"none",SIMPLE:"simple",FANCY:"fancy"},$={NONE:"none",LEFT:"left",RIGHT:"right"};class G extends c{constructor(t=U.NONE){if(super(),this.setPointerEvents("auto"),this.setClass("Panel"),this.contents=function(){return this},t===U.SIMPLE)this.addClass("SimplePanel");else if(t===U.FANCY){this.addClass("FancyPanel");const t=(new G).setClass("FancyPanelOuter"),e=(new G).setClass("FancyPanelBorder"),s=(new G).setClass("FancyPanelInside");e.add(s),t.add(e),this.add(t),this.contents=function(){return s}}this.dom.addEventListener("contextmenu",(function(t){t.preventDefault()}))}makeClosable(t=$.LEFT,s=1.1,i=1){const n=this;function o(){n.closeButton&&n.closeButton.setStyle("opacity","0")}function r(){n.closeButton&&n.closeImageBox&&(n.closeButton.setStyle("opacity","1.0"),n.closeImageBox.setStyle("filter","var(--drop-shadow) brightness(100%)"))}function a(){n.closeButton&&n.closeImageBox&&(n.closeButton.setStyle("opacity","1.0"),n.closeImageBox.setStyle("filter","var(--drop-shadow) brightness(125%)"))}function d(){n.setDisplay("none"),n.dom.dispatchEvent(new Event("closed"))}if(t===$.LEFT||t===$.RIGHT)return this.closeImageBox=new z(e).noShadow(),this.closeImageBox.setStyle("width","105%","height","105%","transition","filter var(--menu-timing) ease-in-out"),this.closeButton=new L,this.closeButton.dom.setAttribute("tooltip","Close Panel"),this.closeButton.add(n.closeImageBox),this.closeButton.setStyle("background","rgb(var(--background-dark))","box-shadow","none","border","none","border-radius","100%","outline","none","min-height",`${s}em`,"min-width",`${s}em`,"position","absolute","opacity","0","overflow","visible","transition","opacity var(--menu-timing) ease-in-out","z-index","1001"),t===$.RIGHT?(this.closeButton.setStyle("right",s*i*.1+"em"),this.closeButton.setStyle("top",s*i*.1+"em")):(this.closeButton.setStyle("left",s*i*.1+"em"),this.closeButton.setStyle("top",s*i*.1+"em")),this.closeButton.dom.addEventListener("pointerenter",a),this.closeButton.dom.addEventListener("pointerleave",r),this.closeButton.dom.addEventListener("click",d),this.dom.addEventListener("pointerenter",r),this.dom.addEventListener("pointerleave",o),void this.dom.appendChild(this.closeButton.dom);if(t===$.NONE){if(!this.closeButton)return;return this.closeButton.dom.removeEventListener("pointerenter",a),this.closeButton.dom.removeEventListener("pointerleave",r),this.closeButton.dom.removeEventListener("click",d),this.dom.removeEventListener("pointerenter",r),this.dom.removeEventListener("pointerleave",o),this.remove(this.closeButton),this.closeButton=void 0,void(this.closeImageBox=void 0)}}}const K={TOP:"Top",BOTTOM:"Bottom",LEFT:"Left",RIGHT:"Right",TOP_LEFT:"TopLeft",TOP_RIGHT:"TopRight",BOTTOM_LEFT:"BottomLeft",BOTTOM_RIGHT:"BottomRight"};class Y extends G{constructor(t){super(t);this.addClass("Resizeable"),this.wantsWidth=0,this.resizer={};for(let t in K){const e=K[t],s=`Resizer${e}`;this.resizer[e]=(new c).addClass("Resizer").addClass(s),this.add(this.resizer[e])}this.setXSizes(),this.setYSizes()}changeWidth(t){null!=t&&!1===Number.isNaN(t)&&(t=Math.min(Math.max(t,this.minWidth),this.maxWidth).toFixed(1),this.setWidth(n.toEm(t)))}changeHeight(t){null!=t&&!1===Number.isNaN(t)&&(t=Math.min(Math.max(t,this.minHeight),this.maxHeight).toFixed(1),this.setHeight(n.toEm(t)))}setXSizes(t=null,e=0,s=1/0){this.minWidth=e,this.maxWidth=s,this.defaultWidth=t}setYSizes(t=null,e=0,s=1/0){this.minHeight=e,this.maxHeight=s,this.defaultHeight=t}toggleResize(t,e){let s=this.resizer[t];return e&&!0!==s.resizeEnabled?(void 0===s._onPointerDown&&(s._onPointerDown=function(t){!1!==t.isPrimary&&(this.downX=t.clientX,this.downY=t.clientY,this.downW=this.parent.getWidth(),this.downH=this.parent.getHeight(),this.dom.ownerDocument.addEventListener("pointermove",this._onPointerMove,!1),this.dom.ownerDocument.addEventListener("pointerup",this._onPointerUp,!1))}.bind(s)),void 0===s._onPointerMove&&(s._onPointerMove=function(t){if(!1===t.isPrimary)return;let e=this.downW,s=this.downH,i=t.clientX-this.downX,o=t.clientY-this.downY;this.hasClassWithString("Left")&&(e=this.downW-i),this.hasClassWithString("Right")&&(e=this.downW+i),this.hasClassWithString("Top")&&(s=this.downH-o),this.hasClassWithString("Bottom")&&(s=this.downH+o),e<this.parent.minWidth*n.guiScale()&&(e=this.parent.minWidth*n.guiScale()),e>this.parent.maxWidth*n.guiScale()&&(e=this.parent.maxWidth*n.guiScale()),s<this.parent.minHeight*n.guiScale()&&(s=this.parent.minHeight*n.guiScale()),s>this.parent.maxHeight*n.guiScale()&&(s=this.parent.maxHeight*n.guiScale()),this.downW!==e&&this.parent.changeWidth(e),window.signals&&signals.windowResize.dispatch()}.bind(s)),void 0===s._onPointerUp&&(s._onPointerUp=function(t){!1!==t.isPrimary&&(this.dom.ownerDocument.removeEventListener("pointermove",this._onPointerMove),this.dom.ownerDocument.removeEventListener("pointerup",this._onPointerUp))}.bind(s)),s.dom.addEventListener("pointerdown",s._onPointerDown,!1),s.setPointerEvents("auto")):e||!0!==s.resizeEnabled||(s.dom.removeEventListener("pointerdown",s._onPointerDown),s.setPointerEvents("none")),s.resizeEnabled=e,this}}const X={LEFT:"left",RIGHT:"right"};class Z extends Y{constructor(t,e=X.RIGHT){super(t);const s=this;this.setName("Tabbed"),this.addClass("Tabbed"),this.tabs=[],this.panels=[],this.selectedId="",this.selectedCount=0,this.tabsDiv=(new c).setClass("Tabs").setDisplay("none"),this.panelsDiv=(new c).setClass("TabPanels"),this.add(this.tabsDiv),this.add(this.panelsDiv),this.setTabSide(e),this.addTab=function(t,e,i,n){let o=0;for(let e=0;e<s.tabs.length;e++){s.tabs[e].dom.id===t&&o++}const r=function(t){const e=String(t).split(" ");for(let t=0;t<e.length;t++)e[t]=e[t][0].toUpperCase()+e[t].substring(1);return e.join(" ")}(t),a=new q(s,r,i,n);a.setId(t),a.count=o,s.tabs.push(a),s.tabsDiv.add(a),s.tabs.length>0&&s.tabsDiv.setDisplay("");const d=(new G).setId(t).addClass("Titled").addClass("Hidden").add(e);return d.count=o,s.panels.push(d),s.panelsDiv.add(d),s.setContentsStyle("minHeight",""),(s.tabsDiv.hasClass("LeftSide")||s.tabsDiv.hasClass("RightSide"))&&s.setContentsStyle("minHeight",2.2*s.tabs.length+.4+"em"),a}}selectFirst(){return this.tabs.length>0&&this.selectTab(this.tabs[0].getId())}selectLastKnownTab(){}selectTab(t,e=0,s=!1){if(null==this.tabs)return this;const i=this;!0!==s&&n.setVariable("--tab-timing","0");let o=this.tabs.find((function(s){return s.dom.id===t&&s.count===e})),r=this.panels.find((function(s){return s.dom.id===t&&s.count===e}));if(o&&r){let a=this.tabs.find((function(t){return t.dom.id===i.selectedId&&t.count===i.selectedCount})),d=this.panels.find((function(t){return t.dom.id===i.selectedId&&t.count===i.selectedCount}));if(a&&a.removeClass("Selected"),d&&d.addClass("Hidden"),o.addClass("Selected"),r.removeClass("Hidden"),this.selectedId=t,this.selectedCount=e,s){const e=new Event("tab-changed");e.value=t,this.dom.dispatchEvent(e)}return!0!==s&&setTimeout((()=>{n.setVariable("--tab-timing","200ms")}),50),!0}return!1}clearTabs(){if(this.tabsDiv&&this.tabsDiv.clear(),this.panelsDiv&&this.panelsDiv.clear(),this.tabs){for(let t=0;t<this.tabs.length;t++)this.tabs[t].clear();this.tabs.length=0}if(this.panels){for(let t=0;t<this.panels.length;t++)this.panels[t].clear();this.panels.length=0}this.setStyle("minHeight","")}currentId(){return this.selectedId}setTabSide(t){t=String(t).toLowerCase(),this.tabsDiv.removeClass("LeftSide"),this.tabsDiv.removeClass("RightSide"),t===X.RIGHT?this.tabsDiv.addClass("RightSide"):this.tabsDiv.addClass("LeftSide")}tabIndex(t){return this.tabs.indexOf(t)}}class q extends c{constructor(t,e,s,i){super();const n=this;if(this.setClass("Tab"),this.setCursor("default"),this.iconVector=new b(s),this.iconBorder=(new c).setClass("TabIcon"),this.add(this.iconVector,this.iconBorder),this.setLabel=function(t){n.iconBorder.dom.setAttribute("tooltip",t)},this.setLabel(e),null!=i){let t,e,s,n;if(t=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(i)){let i;const o=t[1],r=t[2];switch(o){case"rgb":case"rgba":(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))&&(e=Math.min(255,parseInt(i[1],10)),s=Math.min(255,parseInt(i[2],10)),n=Math.min(255,parseInt(i[3],10))),(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))&&(e=Math.min(100,parseInt(i[1],10))/100,s=Math.min(100,parseInt(i[2],10))/100,n=Math.min(100,parseInt(i[3],10))/100)}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(i)){const i=t[1],o=i.length;3===o?(e=parseInt(i.charAt(0)+i.charAt(0),16),s=parseInt(i.charAt(1)+i.charAt(1),16),n=parseInt(i.charAt(2)+i.charAt(2),16)):6===o&&(e=parseInt(i.charAt(0)+i.charAt(1),16),s=parseInt(i.charAt(2)+i.charAt(3),16),n=parseInt(i.charAt(4)+i.charAt(5),16))}else{const t=Math.min(Math.max(Math.floor(i),0),16777215);e=(16711680&t)>>16,s=(65280&t)>>8,n=255&t}const o=`linear-gradient(to bottom left, ${`rgb(${e}, ${s}, ${n})`}, ${`rgb(${parseInt(.75*e)}, ${parseInt(.75*s)}, ${parseInt(.75*n)})`})`;this.iconVector.setStyle("background-image",o)}this.dom.addEventListener("click",(function(){t.selectTab(n.dom.id,n.count,!0),window.signals&&signals.windowResize.dispatch()}))}}const J={TOP_LEFT:"TopLeft",TOP_RIGHT:"TopRight",BOTTOM_LEFT:"BottomLeft",BOTTOM_RIGHT:"BottomRight"};class Q extends c{constructor(){super();const t={};let e=1;for(let s in J){const i=J[s],n=`Docker${i}`,o=(new c).addClass("DockerCorner").addClass(n);o.setStyle("zIndex",`${e}`),e++;let r=!1;o.dom.addEventListener("pointerdown",(t=>r=!0)),o.dom.addEventListener("pointerup",(function(e){if(r){for(let e in t){let s=getComputedStyle(t[e].dom).getPropertyValue("z-index");s>1&&s--,t[e].setStyle("zIndex",`${s}`)}o.setStyle("zIndex",`${Object.keys(t).length}`)}r=!1})),t[i]=o,this.add(o)}function s(){let e=0;for(let s=0;s<t[J.BOTTOM_LEFT].children.length;s++)e+=t[J.BOTTOM_LEFT].children[s].getHeight();let s=parseFloat(n.toEm(e))-.175;t[J.TOP_LEFT].setStyle("bottom",`${s}em`)}signals.windowResize.add(s),this.dispose=()=>{signals.windowResize.remove(s)},this.addDock=function(e,s=J.TOP_LEFT){t[s].add(e),e.isElement&&e.hasClass("Tabbed")&&(s.includes("Right")&&e.setTabSide(X.LEFT),s.includes("Left")&&e.setTabSide(X.RIGHT)),e.isElement&&e.hasClass("Resizeable")&&(e.toggleResize(K.LEFT,s.includes("Right")),e.toggleResize(K.RIGHT,s.includes("Left")),e.toggleResize(K.TOP_LEFT,s.includes("BottomRight")),e.toggleResize(K.TOP_RIGHT,s.includes("BottomLeft")),e.toggleResize(K.BOTTOM_RIGHT,s.includes("TopLeft")),e.toggleResize(K.BOTTOM_LEFT,s.includes("TopRight")))}}}class tt extends h{constructor(){super(document.createElement("div")),this.addClass("FlexBox")}}class et extends w{constructor(){super(),this.setFlex("1 1 auto"),this.setStyle("minHeight","0.01em")}}class st extends c{constructor(){super(),this.setClass("MenuSeparator")}}class it extends L{constructor(t,e){switch(super(t),this.addClass("ToolbarButton"),e){case"left":this.addClass("ButtonLeft");break;case"middle":this.addClass("ButtonMiddle");break;case"right":this.addClass("ButtonRight")}const s=new z;this.add(s),this.contents=function(){return s}}}class nt extends h{constructor(){super(document.createElement("div")),this.setClass("ToolbarSeparator")}}class ot extends G{constructor(t){super(t),this.addClass("Draggable"),this.makeClosable($.RIGHT,1.3,-1.9)}}class rt extends G{constructor(t="",e=""){super();const s=this;this.addClass("Shrinkable"),this.titleDiv=void 0,this.bodyDiv=void 0;const i=(new w).setClass("ShrinkIcon").add(new b(e)),n=(new w).setClass("ShrinkText").setInnerHtml(t),o=(new c).setClass("ShrinkTitle");o.add(i,n,(new w).setClass("ShrinkArrow"));const r=(new c).setClass("ShrinkBody");this.add(o,r),this.titleDiv=o,this.bodyDiv=r,this.contents=function(){return s.bodyDiv},this.setExpanded(!0),o.dom.addEventListener("click",(function(){s.toggle()}))}setExpanded(t=!0){this.isExpanded=t,t?this.addClass("Expanded"):this.removeClass("Expanded")}sort(){const t=this.contents().children;t.sort(((t,e)=>t.name<e.name?-1:t.name>e.name?1:0));for(let e=0;e<t.length;e++)t[e].setStyle("order",e)}toggle(){this.setExpanded(!this.isExpanded)}}class at extends c{constructor(t){super(),this.addClass("Titled"),this.tabTitle=new c(t).addClass("TabTitle"),t&&""!==t&&this.add(this.tabTitle),this.scroller=(new c).addClass("Scroller"),this.add(this.scroller),this.contents=function(){return this.scroller}}}export{o as ALIGN,N as AbsoluteBox,_ as AssetBox,v as Break,L as Button,$ as CLOSE_SIDES,J as CORNERS,S as Checkbox,I as Color,n as Css,c as Div,Q as Docker,ot as Draggable,H as Dropdown,h as Element,tt as FlexBox,W as FlexBreak,et as FlexSpacer,l as Html,t as IMAGE_CHECK,e as IMAGE_CLOSE,s as IMAGE_EMPTY,f as Image,M as Menu,D as MenuItem,st as MenuSeparator,k as MenuShortcut,R as NumberBox,P as NumberScroll,r as OVERFLOW,U as PANEL_STYLES,a as POSITION,x as PROPERTY_SIZE,G as Panel,d as Popper,y as PropertyList,K as RESIZERS,Y as Resizeable,E as Row,z as ShadowBox,rt as Shrinkable,V as Slider,w as Span,X as TAB_SIDES,i as TOOLTIP_Y_OFFSET,Z as Tabbed,C as Text,O as TextArea,F as TextBox,at as Titled,it as ToolbarButton,nt as ToolbarSeparator,T as TreeList,b as VectorBox,g as tooltipper};
