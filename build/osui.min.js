/**
 * @description Osui
 * @about       Lightweight JavaScript UI library.
 * @author      Stephens Nunnally <@stevinz>
 * @license     MIT - Copyright (c) 2021-2022 Stephens Nunnally and Scidian Studios
 * @source      https://github.com/onsightengine/osui
 */
const t='<?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg width="100%" height="100%" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><path d="M373.189,648.684c-0,-0 -237.09,-138.996 -258.087,-117.999c-20.997,20.997 212.331,288.419 212.331,288.419c1.975,3.009 4.284,5.857 6.926,8.499c10.698,10.698 24.796,15.945 38.83,15.71c14.035,0.235 28.132,-5.012 38.831,-15.71c2.641,-2.642 4.95,-5.49 6.926,-8.499c-0,-0 423.255,-489.7 496.91,-611.246c9.004,-14.859 -15.991,-40.415 -34.446,-27.458c-108.024,75.837 -508.221,468.284 -508.221,468.284Z" style="fill:#ebebeb;"/></svg>',e='<?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg width="100%" height="100%" viewBox="0 0 512 512" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><circle cx="256" cy="256" r="256" style="fill:#e24c4b;"/><path d="M354.658,492.268c-30.37,12.709 -63.7,19.732 -98.659,19.732c-141.29,-0 -255.999,-114.71 -255.999,-256c-0,-29.773 5.092,-58.365 14.455,-84.951c-0.306,5.601 -0.022,11.26 -0.461,16.921c-13.988,180.322 123.333,317.446 306.218,306.217c11.622,-0.713 23.138,-0.652 34.446,-1.919Z" style="fill-opacity:0.25;"/><path d="M386.574,400.264c-12.566,12.566 -33.512,12.566 -46.079,0l-84.496,-84.496l-84.496,84.496c-12.567,12.566 -33.513,12.566 -46.079,0c-12.566,-12.567 -12.566,-33.513 -0,-46.079l84.496,-84.496l-84.496,-84.496c-12.566,-12.567 -12.566,-33.513 -0,-46.079c12.566,-12.567 261.15,215.071 261.15,215.071c12.566,12.566 12.566,33.511 -0,46.079Z" style="fill-opacity:0.25;"/><path d="M386.575,386.834c-12.567,12.568 -33.513,12.568 -46.079,0.002l-84.496,-84.498l-84.497,84.498c-12.566,12.566 -33.512,12.566 -46.079,-0c-12.566,-12.568 -12.566,-33.513 -0,-46.079l84.497,-84.496l-84.497,-84.498c-12.566,-12.566 -12.566,-33.511 -0,-46.079c12.567,-12.565 33.513,-12.565 46.079,0l84.496,84.498l84.497,-84.498c12.566,-12.565 33.512,-12.565 46.079,0c12.566,12.568 12.566,33.513 -0,46.079l-84.497,84.496l84.497,84.498c12.566,12.566 12.566,33.51 -0,46.077Z" style="fill:#fff;"/></svg>',s='<?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg width="100%" height="100%" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"></svg>',n="0.3em";class i{static getVariable(t){const e=document.querySelector(":root");return getComputedStyle(e).getPropertyValue(t)}static setVariable(t,e){document.querySelector(":root").style.setProperty(t,e)}static baseSize(){return parseFloat(getComputedStyle(document.querySelector(":root")).fontSize)}static fontSize(){return parseFloat(getComputedStyle(document.body).fontSize)}static guiScale(){return i.fontSize()/i.baseSize()}static getTextWidth(t,e){const s=document.createElement("canvas").getContext("2d");return s.font=e,s.measureText(t).width}static getFontCssFromElement(t=document.body){return`${getComputedStyle(t).fontWeight||"normal"} ${getComputedStyle(t).fontSize||"16px"} ${getComputedStyle(t).fontFamily||"Arial"}`}static parseSize(t){return("string"==typeof t||t instanceof String)&&(t.includes("px")||t.includes("%")||t.includes("em")||t.includes("rem")||t.includes("ch")||t.includes("ex")||t.includes("cap")||t.includes("vw")||t.includes("vh")||t.includes("vmin")||t.includes("vmax"))?t:parseInt(t)+"px"}static toEm(t){const e=i.parseSize(t);return e.includes("px")?parseFloat(e)/10/i.guiScale()+"em":e.includes("em")?e:(console.warn(`Css.toEm: Could not convert to em! Unit passed in: ${t}`),size)}static toPx(t){const e=i.parseSize(t);return e.includes("px")?e:e.includes("rem")?parseInt(10*parseFloat(t))+"px":e.includes("em")?parseInt(10*parseFloat(t)*i.guiScale())+"px":(console.warn(`Css.toPx: Could not convert to pixels! Unit passed in: ${t}`),t)}}const o={LEFT:"left",CENTER:"center",MIDDLE:"center",RIGHT:"right"},r={LEFT:"left",RIGHT:"right"},a={OVER:"over",UNDER:"under"};class l{static getLeft(t){return t.getBoundingClientRect().left}static getTop(t){return t.getBoundingClientRect().top}static getWidth(t){return t.offsetWidth}static getHeight(t){return t.offsetHeight}static popOver(t,e,s=o.LEFT,n=0,i=0,d=r.RIGHT){return l.popOverUnder(t,e,a.OVER,s,n,i,d)}static popUnder(t,e,s=o.LEFT,n=0,i=0,d=r.RIGHT){return l.popOverUnder(t,e,a.UNDER,s,n,i,d)}static popOverUnder(t,e,s=a.UNDER,n=o.LEFT,d=0,h=0,c=r.RIGHT){let u=window.innerWidth-4,m=window.innerHeight-4;d=d?parseInt(i.toPx(d),10):0,h=h?parseInt(i.toPx(h),10):0;let p=l.getLeft(e)+d;if(n===o.CENTER){p=l.getLeft(e)+(l.getWidth(e)-l.getWidth(t))/2+d}else if(n===o.RIGHT){p=l.getLeft(e)+(l.getWidth(e)-l.getWidth(t))+d}c===r.LEFT&&(u=l.getLeft(e)+l.getWidth(e));let g=p+l.getWidth(t);g>u&&(p-=g-u),p<4&&(p=4);let v=l.getTop(e)+l.getHeight(e)+h,f=l.getTop(e)-l.getHeight(t)-h,C=v+l.getHeight(t);C>m&&(s=a.OVER),f<4&&(s=a.UNDER);let w=s===a.UNDER?v:f;return s===a.UNDER&&(C=w+l.getHeight(t),C>m&&(w=m-l.getHeight(t),w<4&&(w=4))),t.style.left=i.toPx(p),t.style.top=i.toPx(w),s}}class d{static isChildOf(t,e){t.isElement&&t.dom&&(t=t.dom);let s=t.parentElement;for(;s;){if(s.isSameNode(e))return!0;s=s.parentElement}return!1}static isChildOfElementWithClass(t,e){t.isElement&&t.dom&&(t=t.dom);let s=t.parentElement;for(;s;){if(s.classList.contains(e))return!0;s=s.parentElement}return!1}static parentElementWithClass(t,e){t.isElement&&t.dom&&(t=t.dom);let s=t.parentElement;for(;s;){if(s.classList.contains(e))return s;s=s.parentElement}}static parentScroller(t){return t?(t.isElement&&t.dom&&(t=t.dom),t.scrollHeight>t.clientHeight?t:d.parentScroller(t.parentElement)):null}static scrollIntoView(t){const e=d.parentScroller(t);if(e){const s=parseInt(i.toPx("0.2em"));t.offsetTop-e.offsetTop-s<e.scrollTop?e.scrollTop=t.offsetTop-e.offsetTop-s:t.offsetTop>e.scrollTop+e.clientHeight+s-e.offsetTop&&(e.scrollTop=t.offsetTop-e.clientHeight+t.offsetHeight+s-e.offsetTop)}}static traverse(t,e=(()=>{}),s=!0){t.isElement&&t.dom&&(t=t.dom),s&&e(t);for(let s=0;s<t.children.length;s++)d.traverse(t.children[s],e,!0)}}class h{constructor(t){const e=this;this.isElement=!0,this.dom=t,this.name=void 0,this.contents=function(){return e},this.children=[]}destroy(){return m(this,!0),this}add(){for(let t=0;t<arguments.length;t++){const e=arguments[t];c(this.contents(),e)}return this}addToSelf(){for(let t=0;t<arguments.length;t++){c(this,arguments[t])}return this}clearContents(){return m(this.contents(),!1),this}remove(){for(let t=0;t<arguments.length;t++){const e=arguments[t];let s=p(this.contents(),e);s||(s=p(this,e)),s||console.log("Element.removeFromParent: Could not remove child!")}return this}setClass(t){return this.dom.className=t,this}addClass(t){return this.dom.classList.add(t),this}hasClass(t){return this.dom.classList.contains(t)}hasClassWithString(t){t=String(t).toLowerCase();const e=[...this.dom.classList];for(let s=0;s<e.length;s++){if(e[s].toLowerCase().includes(t))return!0}return!1}removeClass(){for(let t=0;t<arguments.length;t++){const e=arguments[t];this.dom.classList.remove(e)}return this}setId(t){return this.dom.id=t,void 0===this.name&&(this.name=t),this}getId(){return this.dom.id}setName(t){return this.name=t,this}getName(){return void 0===this.name?"No name":this.name}setAttribute(t,e){this.dom.setAttribute(t,e)}setDisabled(t){return this.dom.disabled=t,this}selectable(t){return t?this.removeClass("Unselectable"):this.addClass("Unselectable"),this}getInnerText(){return this.contents().dom.innerText}setInnerText(t){return null!=t&&(this.contents().dom.innerText=t),this}setInnerHtml(t){return null!=t&&(this.contents().dom.innerHTML=t),this}getInnerHtml(){return this.contents().dom.innerHTML}setTextContent(t){return null!=t&&(this.contents().dom.textContent=t),this}getTextContent(){return this.contents().dom.textContent}setStyle(){for(let t=0,e=arguments.length;t<e;t+=2){const e=arguments[t],s=arguments[t+1];this.dom.style[e]=s}return this}setContentsStyle(){for(let t=0,e=arguments.length;t<e;t+=2){const e=arguments[t],s=arguments[t+1];this.contents().dom.style[e]=s}return this}getLeft(){return this.dom.getBoundingClientRect().left}getTop(){return this.dom.getBoundingClientRect().top}getWidth(){return this.dom.getBoundingClientRect().width}getHeight(){return this.dom.getBoundingClientRect().height}traverse(t,e=!0){if(e&&t(this),this.children)for(let e=0;e<this.children.length;e++)this.children[e].traverse(t,!0)}}function c(t,e){if(e)if(e.isElement){t.dom.appendChild(e.dom);let s=!1;for(let n=0;n<t.children.length;n++){if(t.children[n].dom.isSameNode(e.dom)){s=!0;break}}s||t.children.push(e),e.parent=t}else try{t.dom.appendChild(e)}catch(t){}}function u(t){if(t.children)for(let e=t.children.length-1;e>=0;e--){const s=t.children[e];m(s,!0);try{t.removeChild(s)}catch(t){}}}function m(t,e=!0){t&&(t.isElement?(!function(t){for(let e=0;e<t.children.length;e++)m(t.children[e],!0);t.children.length=0}(t),u(t.dom),e&&t.dom&&t.dom.dispatchEvent&&t.dom.dispatchEvent(new Event("destroy"))):(u(t),e&&t&&t.dispatchEvent&&t.dispatchEvent(new Event("destroy"))))}function p(t,e){if(e){if(e.isElement)for(let s=0;s<t.children.length;s++){if(t.children[s].dom.isSameNode(e.dom))return m(e),t.children.splice(j,1),e.parent=void 0,!0}m(e);try{return t.dom.removeChild(e),!0}catch(t){}return!1}}["display","flex","overflow","visibility","position","left","top","right","bottom","width","height","color","opacity","cursor","pointerEvents"].forEach((function(t){const e="set"+t.substring(0,1).toUpperCase()+t.substring(1,t.length);h.prototype[e]=function(e){return this.setStyle(t,e),this}})),Object.defineProperties(h.prototype,{id:{get:function(){return this.getId()},set:function(t){this.setId(t)}}});["Change","Input","Wheel","KeyUp","KeyDown","Click","DblClick","ContextMenu","PointerDown","PointerMove","PointerUp","PointerEnter","PointerLeave","PointerOut","PointerOver","PointerCancel"].forEach((function(t){const e="on"+t;h.prototype[e]=function(e){const s=t.toLowerCase(),n=e.bind(this),i=this.dom;return i.addEventListener(s,n),i.addEventListener("destroy",(()=>i.removeEventListener(s,n)),{once:!0}),this}}));class g extends h{constructor(t){super(document.createElement("div")),this.setInnerHtml(t)}}const v=1,f=2;let C;const w=new class{constructor(){const t=(new g).setClass("Tooltip").setInnerHtml("");document.body.appendChild(t.dom);let e=v;function s(e){const s=e.target;s&&s instanceof HTMLElement&&s.getAttribute("tooltip")&&(clearTimeout(C),t.removeClass("Updated"))}document.addEventListener("touchstart",(()=>e=f),{capture:!0,passive:!0}),document.addEventListener("mousemove",(()=>e=v),{capture:!0,passive:!0}),document.addEventListener("mouseenter",(function(s){const r=s.target;if(!(r&&r instanceof HTMLElement))return;if(!r.getAttribute("tooltip"))return;if(s instanceof FocusEvent&&e!==v)return;if("TouchEvent"in window&&s instanceof TouchEvent)return;let a=r.getAttribute("tooltip");if(!a.length)return;clearTimeout(C),t.removeClass("Updated"),C=setTimeout((()=>{t.setInnerHtml(a),l.popUnder(t.dom,r,o.CENTER,null,n),t.addClass("Updated")}),parseInt(i.getVariable("--tooltip-delay")))}),{capture:!0,passive:!0}),document.addEventListener("hidetooltip",s,{capture:!0,passive:!0}),document.addEventListener("mouseleave",s,{capture:!0,passive:!0}),document.addEventListener("blur",s,{capture:!0,passive:!0})}};class b extends h{constructor(){super(document.createElement("br"))}}class E extends h{constructor(t,e=null,s=null,n=!1){const o=document.createElement("img");function r(e){if(("string"==typeof e||e instanceof String)&&(e.includes("<svg")||e.includes("<SVG"))){const t=new Blob([e],{type:"image/svg+xml"}),s=URL.createObjectURL(t);o.src=s,o.addEventListener("load",(()=>URL.revokeObjectURL(s)),{once:!0})}else o.src=t}o.onerror=()=>o.style.visibility="hidden",r(t),n||(o.ondragstart=()=>!1),null!=e&&(o.style.width=i.parseSize(e)),null!=s&&(o.style.height=i.parseSize(s)),super(o),this.setClass("Image"),this.setImage=function(t){r(t)}}}class x extends h{constructor(t){super(document.createElement("span")),this.setInnerHtml(t)}}class y extends x{constructor(t){super(t),this.setClass("Text"),this.setCursor("default")}}class T extends g{constructor(){super(),this.addClass("Row")}}class S extends g{constructor(){super(),this.setClass("VectorBox");let t=arguments;0===arguments.length?t=[s]:1===arguments.length&&Array.isArray(arguments[0])&&(t=arguments[0]);for(let e=0;e<t.length;e++){const s=this.addImage(t[e]);0===e&&(this.img=s)}}addImage(t){void 0!==t&&""!==t||(t=s);const e=new E(t,"100%","100%",!1);return this.add(e),this.img||(this.img=e),e}makeDraggable(){for(let t=0;t<this.contents().children.length;t++)this.contents().children[t].dom.ondragstart=()=>{}}setImage(t){this.img.setImage(t)}}const L={HALF:"half",THIRD:"third"};class I extends g{constructor(t=L.HALF){super(),this.addClass("PropertyList"),this.setStyle("display","block"),this.rowSizing=t,this.setRowSizeHalfs=function(){this.rowSizing=L.HALF},this.setRowSizeThirds=function(){this.rowSizing=L.THIRD}}addHeader(t="",e,s=!1){const n=this.createHeader(t,e,s);return this.add(n),n}addRow(t="",...e){const s=this.createRow(t,this.createControls(...e));return this.add(s),s}createHeader(t="",e,s=!1){const n=(new g).setClass("PropertyHeaderTitle"),i=new S(e);return s&&i.addClass("EnlargeIcon"),n.iconHolder=(new x).setClass("PropertyHeaderIcon").add(i),n.textHolder=(new x).setClass("PropertyHeaderText").setTextContent(t),n.add(n.iconHolder,n.textHolder),n}createRow(t="",...e){const s=this.createControls(...e),n=new y(t).selectable(!1).addClass("PropertyLeft");this.rowSizing===L.THIRD?(n.addClass("PropertyLeftThird"),s.addClass("PropertyRightThird")):(n.addClass("PropertyLeftHalf"),s.addClass("PropertyRightHalf"));const i=(new T).addClass("PropertyRow").add(n,s);return i.leftWidget=n,i.rightWidget=s,i}createControls(){const t=(new T).setStyle("margin","0","padding","0").addClass("PropertyRight");let e=arguments;1===arguments.length&&Array.isArray(arguments[0])&&(e=arguments[0]);for(let s=0;s<e.length;s++){const n=e[s];n instanceof h&&n.isElement?(t.add(n),s<e.length-1&&t.add((new x).addClass("PropertySpace"))):console.error("PropertyList.createRight():",n,"is not an instance of Osui Element.")}return t}}class M extends g{constructor(t=!1){super();const e=this;this.setClass("TreeList"),this.dom.tabIndex=0,this.multiSelect=t,this.options=[],this.selectedValue=null,this.selectedValues=[],this._shiftAdd=0,this._shiftTrack=[],this.onKeyDown((function(t){if(e.multiSelect){if(t.shiftKey||(e._shiftAdd=0,e._shiftTrack=[]),38===t.keyCode||40===t.keyCode){t.preventDefault(),t.stopPropagation();let s=[...e.selectedValues];if(t.shiftKey){0===e._shiftTrack.length&&(e._shiftTrack=[...s]),s=[...e._shiftTrack];let n=s[s.length-1],i=e.getIndex(n);if(-1===i)return;if(38===t.keyCode&&i+e._shiftAdd>0&&e._shiftAdd--,40===t.keyCode&&i+e._shiftAdd<e.options.length-1&&e._shiftAdd++,i+=e._shiftAdd,i<0||i>e.options.length-1)return;const o=e.getIndex(s[s.length-1]),r=i;if(o<r)for(let t=o;t<=r;t++){const n=e.options[t].value;s.includes(n)||s.push(n)}else for(let t=o;t>=r;t--){const n=e.options[t].value;s.includes(n)||s.push(n)}e.setValues(s,!0),e.dom.dispatchEvent(new Event("change"))}else if(s.length>0){let n=s[s.length-1],i=e.getIndex(n);if(-1===i)return;38===t.keyCode&&i--,40===t.keyCode&&i++,i>=0&&i<e.options.length&&(e.setValues([e.options[i].value],!0),e.dom.dispatchEvent(new Event("change")))}}}else if(38===t.keyCode||40===t.keyCode){t.preventDefault(),t.stopPropagation();let s=e.getIndex(e.selectedValue);if(-1===s)return;38===t.keyCode&&s--,40===t.keyCode&&s++,s>=0&&s<e.options.length&&(e.setValue(e.options[s].value,!0),e.dom.dispatchEvent(new Event("change")))}})),this.onKeyUp((function(t){switch(t.keyCode){case 38:case 40:t.preventDefault(),t.stopPropagation(),t.shiftKey||(e._shiftAdd=0,e._shiftTrack=[])}}))}getIndex(t){for(let e=0;e<this.options.length;e++)if(this.options[e].value===t)return e;return-1}getValue(){return this.selectedValue}setValue(t,e=!1){let s;for(let t=0;t<this.options.length;t++)this.options[t].classList.remove("Active");for(let e=0;e<this.options.length;e++){const n=this.options[e];parseInt(n.value)===parseInt(t)&&(n.classList.add("Active"),s=n)}return s&&e&&setTimeout((()=>d.scrollIntoView(s)),0),this.selectedValue=t,this}getValues(){return this.selectedValues}setValues(t,e=!1){let s;for(let t=0;t<this.options.length;t++)this.options[t].classList.remove("Active"),this.options[t].classList.remove("ActiveTop"),this.options[t].classList.remove("ActiveBottom");for(let e=0;e<t.length;e++){const n=t[e];for(let t=0;t<this.options.length;t++){const e=this.options[t];parseInt(e.value)===parseInt(n)&&(e.classList.add("Active"),s=e)}}for(let t=0;t<this.options.length-1;t++){const e=this.options[t],s=this.options[t+1];e.classList.contains("Active")&&s.classList.contains("Active")&&(e.classList.add("ActiveTop"),s.classList.add("ActiveBottom"))}return s&&e&&setTimeout((()=>d.scrollIntoView(s)),0),this.selectedValues=[...t],this}setOptions(t){const e=this;function s(t){if(t.shiftKey||(e._shiftAdd=0,e._shiftTrack=[]),e.multiSelect){let s=[...e.selectedValues];if(t.altKey||t.ctrlKey||t.metaKey){if(s.includes(this.value)){const t=s.indexOf(this.value);s.splice(t,1)}else s.push(this.value);e.setValues(s)}else if(t.shiftKey&&s.length>0){0===e._shiftTrack.length&&(e._shiftTrack=[...e.selectedValues]),s=[...e._shiftTrack];const t=e.getIndex(s[s.length-1]),n=e.getIndex(this.value);if(t<n)for(let i=t;i<=n;i++){const t=e.options[i].value;s.includes(t)||s.push(t)}else for(let i=t;i>=n;i--){const t=e.options[i].value;s.includes(t)||s.push(t)}e._shiftAdd=n-t,e.setValues(s)}else e.setValues([this.value])}else e.setValue(this.value);const s=new Event("change");e.dom.dispatchEvent(s)}let n;function i(){n=this}function o(t){t.dataTransfer.setData("text/plain",this.value)}function r(t){if(!n||this===n)return;const e=t.offsetY/this.clientHeight;this.className="Option Drag",e<.25&&(this.className="Option DragTop"),e>.75&&(this.className="Option DragBottom")}function a(){n&&this!==n&&(this.className="Option")}function l(t){t.preventDefault(),t.stopPropagation(),n&&this!==n&&(this.className="Option",e.onDrop&&"function"==typeof e.onDrop&&e.onDrop(t,this,n),n=void 0)}this.clearContents(),e.options=[];for(let n=0;n<t.length;n++){const d=t[n];d.className="Option",e.dom.appendChild(d),e.options.push(d),d.addEventListener("pointerdown",s),!0===d.draggable&&(d.addEventListener("drag",i),d.addEventListener("dragstart",o),d.addEventListener("dragover",r),d.addEventListener("dragleave",a),d.addEventListener("drop",l)),d.addEventListener("destroy",(function(){d.removeEventListener("pointerdown",s),!0===d.draggable&&(d.removeEventListener("drag",i),d.removeEventListener("dragstart",o),d.removeEventListener("dragover",r),d.removeEventListener("dragleave",a),d.removeEventListener("drop",l))}),{once:!0})}return this}}class D extends h{constructor(t){super(document.createElement("button"));const e=this;this.setClass("Button"),this.dom.innerHTML=t??"",this.attachedMenu=void 0,this.menuOffsetX=0,this.menuOffsetY=0,this.alignMenu=o.LEFT,this.overflowMenu=r.RIGHT,Object.defineProperty(this,"disabled",{get:function(){return!this.dom||this.dom.disabled},set:function(t){this.dom&&(this.dom.disabled=t)}}),this.onPointerDown((function(){const t=new Event("hidetooltip",{bubbles:!0});e.dom.dispatchEvent(t)})),this.dom.addEventListener("destroy",(function(){e.attachedMenu&&e.detachMenu()}),{once:!0})}attachMenu(t){const e=this;if(!1===t.hasClass("Menu"))return this;this.addClass("MenuButton"),this.attachedMenu=t,document.body.appendChild(t.dom),this.dom.addEventListener("pointerdown",n);function s(){l.popUnder(t.dom,e.dom,e.alignMenu,e.menuOffsetX,e.menuOffsetY,e.overflowMenu)===a.UNDER?(t.removeClass("SlideUp"),t.addClass("SlideDown")):(t.removeClass("SlideDown"),t.addClass("SlideUp"))}function n(n){!1===e.hasClass("Selected")&&(e.addClass("Selected"),s(),e.dom&&t.showMenu(e.dom))}new MutationObserver(((t,e)=>{document.contains(this.dom)&&(s(),e.disconnect())})).observe(document,{attributes:!1,childList:!0,characterData:!1,subtree:!0}),window.addEventListener("resize",s),this.detachMenu=function(){!1!==e.hasClass("MenuButton")&&(e.removeClass("MenuButton"),window.removeEventListener("resize",s),e.dom.removeEventListener("pointerdown",n),e.attachedMenu.destroy(),document.body.removeChild(e.attachedMenu.dom),e.attachedMenu=void 0)}}}class k extends h{constructor(t){super(document.createElement("label")),this.setClass("Checkbox"),this.checkbox=new h(document.createElement("input")).addClass("CheckboxInput"),this.checkbox.dom.type="checkbox";let e=(new g).addClass("CheckboxButton");this.add(this.checkbox,e),this.setValue(t)}getValue(){if(this.checkbox.dom)return this.checkbox.dom.checked}setValue(t){return this.checkbox.dom?(this.checkbox.dom.checked=!!t,this):this}}class H extends D{constructor(){super();const t=this;this.addClass("ColorButton"),this.addClass("DropArrow");const e=new h(document.createElement("input"));e.addClass("ColorInputButton"),e.dom.setAttribute("autocomplete","off");try{e.dom.type="color"}catch(t){}this.add(e);const s=(new g).addClass("DropColor");s.setStyle("backgroundColor",e.dom.value),this.add(s),e.onPointerDown((function(){t.addClass("Selected")})),e.onInput((function(){s.setStyle("backgroundColor",e.dom.value),t.dom.setAttribute("tooltip",e.dom.value)})),e.dom.addEventListener("blur",(function(){t.removeClass("Selected")})),this.getValue=function(){return e.dom?e.dom.value:0},this.getHexValue=function(){return e.dom?parseInt(e.dom.value.substring(1),16):0},this.setValue=function(n){return e.dom?(e.dom.value=n,s.setStyle("backgroundColor",e.dom.value),t.dom.setAttribute("tooltip",e.dom.value),this):this},this.setHexValue=function(s){return e.dom?(void 0===s||t.setValue("#"+("000000"+s.toString(16)).slice(-6)),this):this},this.setHexValue(16777215)}}class B extends g{constructor(){super(),this.setClass("Menu"),this.mouseSvg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.mouseSvg.setAttribute("class","MenuMouseTriangle"),this.mouseSvg.setAttribute("pointer-events","none"),this.mouseSvg.setAttribute("version","1.1"),this.mouseArea=document.createElementNS("http://www.w3.org/2000/svg","polygon"),this.mouseArea.setAttribute("fill","aqua"),this.mouseArea.setAttribute("opacity","0.0"),this.mouseArea.setAttribute("pointer-events","fill"),this.mouseSvg.appendChild(this.mouseArea)}isShown(){return this.hasClass("MenuShow")}showMenu(t){const e=this;if(this.addClass("MenuShow"),this.clickCount=0,d.isChildOfElementWithClass(this.dom,"Menu")){this.mouseArea.setAttribute("pointer-events","none"),this.contents().dom.appendChild(this.mouseSvg);let t=1e3*parseFloat(i.getVariable("--menu-timing"));setTimeout((()=>{this.updateMouseArea()}),t)}function s(t){let s=!0;if(e.dom.contains(t.target)){let e=t.target,n=e.classList;for(;e.parentElement&&!1===n.contains("Menu")&&!1===n.contains("MenuItem");)e=e.parentElement,n=e.classList;(n.contains("MenuItem")&&n.contains("SubMenuItem")||n.contains("KeepOpen"))&&(s=!1,t.target&&"input"!==t.target.tagName.toLowerCase()&&t.preventDefault())}s&&e.clickCount++,1===e.clickCount&&(s=!1),s&&(e.closeMenu(),window.signals&&signals.guiLostFocus.dispatch())}function n(t){if("Escape"===t.code)e.closeMenu()}return this.closeMenu=function(e=!0,i){if(this.traverse((t=>{i&&d.isChildOf(t.dom,i)||(t.removeClass("MenuShow","Selected"),t.attachedMenu&&t.attachedMenu.closeMenu&&t.attachedMenu.closeMenu(!0),t.dom&&t.dom.blur&&t.dom.blur())}),e),e){let e=t;for(;e;)t.classList.contains("MenuButton")?(e.classList.remove("Selected"),e=void 0):e=e.parentElement;t.classList.contains("MenuButton")&&(document.removeEventListener("pointerdown",s),document.removeEventListener("keydown",n))}},t.classList.contains("MenuButton")&&(document.addEventListener("pointerdown",s),document.addEventListener("keydown",n)),this}updateMouseArea(){let t=this.dom.parentElement.getBoundingClientRect(),e=this.dom.getBoundingClientRect(),s=t.top-e.top+t.height/2,n=s-t.height/2,i=s+t.height/2,o=t.width/3;this.mouseSvg.style.left=`-${o}px`,this.mouseSvg.style.top="-10px",this.mouseSvg.setAttribute("width",`${this.getWidth()+o}px`),this.mouseSvg.setAttribute("height",`${this.getHeight()+20}px`);let r=`${o},0`,a=`0,${10+n}`,l=`0,${10+i}`,d=`${o},${this.getHeight()+20}`;return this.mouseArea.setAttributeNS(null,"points",`${r} ${a} ${l} ${d}`),this.mouseArea.setAttribute("pointer-events","fill"),this}}class P extends g{constructor(t){super(),this.setClass("MenuShortcut"),t&&this.setShortcutText(t)}setShortcutText(t){if(!t)return this;this.text=t,this.clearContents();for(let e=0;e<t.length;e++){let s=(new g).setClass("MenuShortcutCharacter"),n=t[e];for(;e+1<t.length&&t[e+1]===t[e+1].toLowerCase();)n+=t[e+1],e++;1===n.length?s.setWidth("1em"):(s.setStyle("paddingLeft","0.15em"),s.setStyle("paddingRight","0.15em")),s.dom.innerHTML=n,this.add(s)}return this}}class R extends g{constructor(t,e,s){super();const n=this;this.setClass("MenuItem"),this.setName(t),this.divIcon=new S(e),this.divIconHolder=(new g).add(this.divIcon).setClass("MenuIcon"),this.divText=(new g).setClass("MenuText"),this.divSpacer=(new g).setStyle("flex","1 1 auto"),this.divShortcut=new P(s),this.add((new T).add(this.divIconHolder,this.divText,this.divSpacer,this.divShortcut)),this.checked=!1,this.disabled=!1,this.subMenu=void 0,this.onContextMenu((function(t){t.preventDefault()})),this.onPointerEnter((()=>{let t=n.parent;for(;t&&!1===t.hasClass("Menu");)t=t.parent;t&&t.closeMenu&&t.closeMenu(!1,n.dom),n.subMenu&&n.subMenu.showMenu(n.dom)})),this.setText(t),this.selectable(!1)}isChecked(){return this.checked}isDisabled(){return this.disabled}keepOpen(){return this.addClass("KeepOpen"),this}setChecked(e){const n=e?t:s;return e?this.divIcon.addClass("IconColorize"):this.divIcon.removeClass("IconColorize"),this.setImage(n),this.checked=e,this}setDisabled(t){return t?this.addClass("Disabled"):this.removeClass("Disabled"),this.disabled=t,this}setImage(t){return this.divIcon.setImage(t),this}setText(t){let e=t||" ";return this.divText.dom.innerHTML=e,this}attachSubMenu(t){return!1===t.hasClass("Menu")||(t.addClass("SlideDown"),this.removeSubMenu(),this.addClass("SubMenuItem"),this.add(t),this.subMenu=t),this}hasSubMenu(){return this.hasClass("SubMenuItem")}removeSubMenu(){this.removeClass("SubMenuItem");const t=this.subMenu;this.subMenu=void 0;for(let t=this.contents().dom.children.length-1;t>=0;t--){let e=this.contents().dom.children[t];e.classList.contains("Menu")&&this.remove(e)}return t}}class A extends D{constructor(t){super(t=t??"&nbsp");const e=this;this.items=[],this.value=void 0,this.menuOffsetX=0,this.menuOffsetY=5,this.addClass("Dropdown"),this.addClass("DropArrow"),this.onWheel((function(t){t.preventDefault(),t.deltaY;let s=e.getValue();if(null==s)return;let n=e.getItemByKey(s);if(!n)return;let i=e.items.indexOf(n);-1!==i&&(t.deltaY<0?i>0&&(i-=1,e.setValue(e.items[i].value),e.dom&&e.dom.dispatchEvent(new Event("change"))):i<e.items.length-1&&(i+=1,e.setValue(e.items[i].value),e.dom&&e.dom.dispatchEvent(new Event("change"))))}))}getItemByKey(t){for(let e=0;e<this.items.length;e++)if(this.items[e].value===t)return this.items[e]}getValue(){return this.value}setValue(t){if(t=String(t),this.value!==t)for(let e=0;e<this.items.length;e++){let s=this.items[e];if(s.value===t){for(let t=0;t<this.items.length;t++)this.items[t].setChecked(!1);return s.setChecked(!0),this.value=t,this.dom&&(this.dom.innerHTML=s.dom.innerText),this}}return this}setOptions(t){this.detachMenu&&this.detachMenu(),this.items.length=0;for(const e in t){let s=new R(t[e]);s.value=e,this.items.push(s);const n=this;s.onPointerDown((function(){n.setValue(s.value),n.dom&&n.dom.dispatchEvent(new Event("change"))}))}let e=new B;for(let t=0;t<this.items.length;t++)e.add(this.items[t]);this.attachMenu(e),e.addClass("SelectMenu")}}const V=new Event("change",{bubbles:!0,cancelable:!0});class F extends h{constructor(t){super(document.createElement("input"));const e=this;function s(t){e.dom&&e.setValue(e.dom.value)}function n(t){if(t.stopPropagation(),"KeyZ"===t.code&&(t.ctrlKey||t.metaKey))return t.preventDefault(),void(t.shiftKey?editor.redo():editor.undo());switch(t.code){case"Enter":e.dom&&(e.dom.style.cursor="text"),e.dom&&e.dom.blur();break;case"ArrowUp":t.preventDefault(),e.setValue(e.getValue()+e.nudge),e.dom&&e.dom.dispatchEvent(V);break;case"ArrowDown":t.preventDefault(),e.setValue(e.getValue()-e.nudge),e.dom&&e.dom.dispatchEvent(V)}}function i(t){t.stopPropagation()}function o(t){t.preventDefault();const s=t.deltaY<0?-1:1,n=e.getValue()-s*e.step;e.setValue(n),e.dom&&e.dom.dispatchEvent(V)}this.setClass("Number"),this.dom.style.cursor="text",this.dom.value="0.00",this.dom.setAttribute("autocomplete","off"),this.value=0,this.min=-1/0,this.max=1/0,this.precision=3,this.step=.1,this.unit="",this.nudge=1,this.setValue(t),this.dom.addEventListener("keydown",n),this.dom.addEventListener("keyup",i),this.dom.addEventListener("wheel",o),this.dom.addEventListener("change",s),this.dom.addEventListener("destroy",(function(){e.dom.removeEventListener("keydown",n),e.dom.removeEventListener("keyup",i),e.dom.removeEventListener("wheel",o),e.dom.removeEventListener("change",s)}),{once:!0})}getValue(){return parseFloat(this.value)}setValue(t){let e=parseFloat(t);if(void 0===e||isNaN(e)||!isFinite(e))return this;e<this.min&&(e=this.min),e>this.max&&(e=this.max),e=parseFloat(e.toFixed(this.precision));let s=Math.min(this.precision,(n=e,Math.floor(n.valueOf())===n.valueOf()?0:n.toString().split(".")[1].length||0));var n;return e=e.toFixed(s),void 0!==e&&!isNaN(e)&&isFinite(e)&&(this.value=e,this.dom&&(this.dom.value=e),this.dom&&""!==this.unit&&(this.dom.value=e+" "+this.unit)),this}setPrecision(t){return this.precision=t,this}setStep(t){return this.step=t,this}setNudge(t){return this.nudge=t,this}setRange(t,e){return this.min=t,this.max=e,this}setUnit(t){return this.unit=t,this}}class O extends F{constructor(t){super(t);const e=this;this.dom.style.cursor="ns-resize";let s=0,n=0;const i={x:0,y:0},o={x:0,y:0};function r(t){t.preventDefault(),s=0,n=e.getValue(),o.x=t.clientX,o.y=t.clientY}function a(t){const r=e.getValue();let a;i.x=t.clientX,i.y=t.clientY,s+=i.x-o.x-(i.y-o.y),a=n+s/(t.shiftKey?.1:1)*e.step,a=Math.min(e.max,Math.max(e.min,a)),r!==a&&(e.setValue(a),e.dom&&e.dom.dispatchEvent(V)),o.x=t.clientX,o.y=t.clientY}function l(){Math.abs(s)<2&&e.dom&&e.dom.focus()}function d(t){1===t.touches.length&&(s=0,n=e.getValue(),o.x=t.touches[0].pageX,o.y=t.touches[0].pageY)}function h(t){const r=e.getValue();let a;i.x=t.touches[0].pageX,i.y=t.touches[0].pageY,s+=i.x-o.x-(i.y-o.y),a=n+s/(t.shiftKey?5:50)*e.step,a=Math.min(e.max,Math.max(e.min,a)),r!==a&&(e.setValue(a),e.dom&&e.dom.dispatchEvent(V)),o.x=t.touches[0].pageX,o.y=t.touches[0].pageY}function c(t){0===t.touches.length&&Math.abs(s)<2&&e.dom&&e.dom.focus()}function u(){e.dom&&(e.dom.style.cursor="")}function m(){e.dom&&(e.dom.style.cursor="ns-resize")}this.dom.addEventListener("mousedown",r),this.dom.addEventListener("mousemove",a),this.dom.addEventListener("mouseup",l),this.dom.addEventListener("touchstart",d),this.dom.addEventListener("touchmove",h),this.dom.addEventListener("touchend",c),this.dom.addEventListener("focus",u),this.dom.addEventListener("blur",m),this.dom.addEventListener("destroy",(function(){e.dom.removeEventListener("mousedown",r),e.dom.removeEventListener("mousemove",a),e.dom.removeEventListener("mouseup",l),e.dom.removeEventListener("touchstart",d),e.dom.removeEventListener("touchmove",h),e.dom.removeEventListener("touchend",c),e.dom.removeEventListener("focus",u),e.dom.removeEventListener("blur",m)}),{once:!0})}}const N=new Event("change",{bubbles:!0,cancelable:!0});class z extends g{constructor(t=0,e=0,s=100){super();const n=this;this.setClass("SlideContainer"),this.precision=2;const i=new h(document.createElement("input")).addClass("Slider");i.dom.type="range",i.dom.value=t,i.dom.min=e,i.dom.max=s;const o=new g(" ").addClass("TickMarks");this.slider=i,this.ticks=o,this.add(o,i),i.onInput((function(){if(!i.dom)return;const t=i.dom.value,e=i.dom.min,s=i.dom.max;i.dom.style.setProperty("--middle",`${parseFloat((t-e)/(s-e))}`)})),i.onWheel((function(t){if(!i.dom)return;t.preventDefault();const e=t.deltaY<0?-1:1,s=parseFloat(i.dom.min),o=parseFloat(i.dom.max);let r=i.dom.step;r="any"===r?Number.isFinite(o)&&Number.isFinite(s)?(o-s)/20:1:parseFloat(r);const a=n.getValue()-e*r;n.setValue(a),i.dom.dispatchEvent(N)}))}getValue(){return this.slider.dom?parseFloat(this.slider.dom.value):null}setValue(t){if(!this.slider.dom)return this;let e=parseFloat(t);if(void 0===e||isNaN(e)||!isFinite(e))return this;e<this.min&&(e=this.min),e>this.max&&(e=this.max),e=parseFloat(e.toFixed(this.precision));let s=Math.min(this.precision,(n=e,Math.floor(n.valueOf())===n.valueOf()?0:n.toString().split(".")[1].length||0));var n;e=e.toFixed(s),void 0!==e&&!isNaN(e)&&isFinite(e)&&(this.slider.dom.value=e);const i=this.slider.dom.value,o=this.slider.dom.min,r=this.slider.dom.max;return this.slider.dom.style.setProperty("--middle",`${parseFloat((i-o)/(r-o))}`),this}setPrecision(t){return this.precision=t,this}setRange(t,e){return this.slider.dom?(this.slider.dom.min=t,this.slider.dom.max=e,this.setTicks(),this):this}setStep(t){return this.slider.dom?(this.slider.dom.step=t,this.setTicks(),this):this}setTicks(){if(!this.slider.dom)return this;const t=this.ticks,e=this.slider.dom.min,s=this.slider.dom.max,n=this.slider.dom.step;if("any"!==n&&isFinite(e)&&isFinite(s)){const i=parseFloat((s-e)/n),o=9;let r=i;if(r>o)for(let t=1;t<=o;t++)Number.isInteger(i/t)&&(r=t);t.dom.style.setProperty("--divides",`${r}`)}else t.setStyle("display","none")}}class W extends h{constructor(){super(document.createElement("textarea")),this.setClass("TextArea"),this.dom.spellcheck=!1,this.dom.setAttribute("autocomplete","off"),this.onKeyDown((function(t){if(t.stopPropagation(),9===t.keyCode){t.preventDefault();const e=this.selectionStart;this.value=this.value.substring(0,e)+"\t"+this.value.substring(e),this.selectionStart=e+1,this.selectionEnd=this.selectionStart}}))}getValue(){return this.dom?this.dom.value:null}setValue(t){return this.dom?(this.dom.value=t,this):this}}class _ extends h{constructor(t){super(document.createElement("input")),this.setClass("Input"),this.dom.type="text",this.dom.setAttribute("autocomplete","off"),this.dom.setAttribute("spellcheck","false"),this.setValue(t),this.onKeyDown((function(t){t.stopPropagation(),"KeyZ"===t.code&&(t.ctrlKey||t.metaKey)&&(t.preventDefault(),t.shiftKey?editor.redo():editor.undo())})),this.onKeyUp((function(t){t.stopPropagation()}))}getValue(){return this.dom?this.dom.value:null}setValue(t){return this.dom?(this.dom.value=t,this):this}}class U extends g{constructor(){super(),this.setClass("AbsoluteBox")}}class $ extends g{constructor(){super(),this.setClass("ShadowBox");let t=arguments;1===arguments.length&&Array.isArray(arguments[0])&&(t=arguments[0]);for(let e=0;e<t.length;e++){let s=t[e];void 0!==s&&!0===s.isElement?this.add(s):this.add(new S(s))}}noShadow(){return this.addClass("NoShadow"),this}}class G extends g{constructor(t="",e=!0){super(),this.setClass("AssetBox"),this.dom.tabIndex=0,e&&this.addClass("MiniAssetBox"),""!==t&&this.dom.setAttribute("tooltip",t),("string"==typeof t||t instanceof String)&&""!==t||(t="Unknown"),this.setName(t.toLowerCase());const s=new $;s.dom.draggable=!0,this.add(s),this.contents=function(){return s}}}class K extends g{constructor(){super(),this.setStyle("flexBasis","100%"),this.setStyle("flexGrow","1"),this.setStyle("height","0")}}const Y={NONE:"none",SIMPLE:"simple",FANCY:"fancy"},X={NONE:"none",LEFT:"left",RIGHT:"right"};class Z extends g{constructor(t=Y.NONE){super();if(this.setPointerEvents("auto"),this.setClass("Panel"),this.contents=function(){return this},t===Y.SIMPLE)this.addClass("SimplePanel");else if(t===Y.FANCY){this.addClass("FancyPanel");const t=(new Z).setClass("FancyPanelOuter"),e=(new Z).setClass("FancyPanelBorder"),s=(new Z).setClass("FancyPanelInside");e.add(s),t.add(e),this.add(t),this.contents=function(){return s}}this.onContextMenu((function(t){t.preventDefault()}))}makeClosable(t=X.LEFT,s=1.1,n=1){const i=this;function o(){i.closeButton&&i.closeButton.setStyle("opacity","0")}function r(){i.closeButton&&i.closeImageBox&&(i.closeButton.setStyle("opacity","1.0"),i.closeImageBox.setStyle("filter","var(--drop-shadow) brightness(100%)"))}function a(){i.closeButton&&i.closeImageBox&&(i.closeButton.setStyle("opacity","1.0"),i.closeImageBox.setStyle("filter","var(--drop-shadow) brightness(125%)"))}function l(){i.setDisplay("none"),i.dom.dispatchEvent(new Event("closed"))}if(t===X.LEFT||t===X.RIGHT)return this.closeImageBox=new $(e).noShadow(),this.closeImageBox.setStyle("width","105%","height","105%","transition","filter var(--menu-timing) ease-in-out"),this.closeButton=new D,this.closeButton.dom.setAttribute("tooltip","Close Panel"),this.closeButton.add(i.closeImageBox),this.closeButton.setStyle("background","rgb(var(--background-dark))","box-shadow","none","border","none","border-radius","100%","outline","none","min-height",`${s}em`,"min-width",`${s}em`,"position","absolute","opacity","0","overflow","visible","transition","opacity var(--menu-timing) ease-in-out","z-index","1001"),t===X.RIGHT?(this.closeButton.setStyle("right",s*n*.1+"em"),this.closeButton.setStyle("top",s*n*.1+"em")):(this.closeButton.setStyle("left",s*n*.1+"em"),this.closeButton.setStyle("top",s*n*.1+"em")),this.closeButton.dom.addEventListener("pointerenter",a),this.closeButton.dom.addEventListener("pointerleave",r),this.closeButton.dom.addEventListener("click",l),this.dom.addEventListener("pointerenter",r),this.dom.addEventListener("pointerleave",o),void this.addToSelf(this.closeButton);if(t===X.NONE){if(!this.closeButton)return;return this.closeButton.dom.removeEventListener("pointerenter",a),this.closeButton.dom.removeEventListener("pointerleave",r),this.closeButton.dom.removeEventListener("click",l),this.dom.removeEventListener("pointerenter",r),this.dom.removeEventListener("pointerleave",o),this.remove(this.closeButton),this.closeButton=void 0,void(this.closeImageBox=void 0)}}}const q={TOP:"Top",BOTTOM:"Bottom",LEFT:"Left",RIGHT:"Right",TOP_LEFT:"TopLeft",TOP_RIGHT:"TopRight",BOTTOM_LEFT:"BottomLeft",BOTTOM_RIGHT:"BottomRight"};class J extends Z{constructor(t){super(t);this.addClass("Resizeable"),this.wantsWidth=0,this.resizer={};for(let t in q){const e=q[t],s=`Resizer${e}`;this.resizer[e]=(new g).addClass("Resizer").addClass(s),this.add(this.resizer[e])}this.setXSizes(),this.setYSizes()}changeWidth(t){null!=t&&!1===Number.isNaN(t)&&(t=Math.min(Math.max(t,this.minWidth),this.maxWidth).toFixed(1),this.setWidth(i.toEm(t)))}changeHeight(t){null!=t&&!1===Number.isNaN(t)&&(t=Math.min(Math.max(t,this.minHeight),this.maxHeight).toFixed(1),this.setHeight(i.toEm(t)))}setXSizes(t=null,e=0,s=1/0){this.minWidth=e,this.maxWidth=s,this.defaultWidth=t}setYSizes(t=null,e=0,s=1/0){this.minHeight=e,this.maxHeight=s,this.defaultHeight=t}toggleResize(t,e){let s=this.resizer[t];return e&&!0!==s.resizeEnabled?(void 0===s._onPointerDown&&(s._onPointerDown=function(t){!1!==t.isPrimary&&(this.downX=t.clientX,this.downY=t.clientY,this.downW=this.parent.getWidth(),this.downH=this.parent.getHeight(),this.dom.ownerDocument.addEventListener("pointermove",this._onPointerMove,!1),this.dom.ownerDocument.addEventListener("pointerup",this._onPointerUp,!1))}.bind(s)),void 0===s._onPointerMove&&(s._onPointerMove=function(t){if(!1===t.isPrimary)return;let e=this.downW,s=this.downH,n=t.clientX-this.downX,o=t.clientY-this.downY;this.hasClassWithString("Left")&&(e=this.downW-n),this.hasClassWithString("Right")&&(e=this.downW+n),this.hasClassWithString("Top")&&(s=this.downH-o),this.hasClassWithString("Bottom")&&(s=this.downH+o),e<this.parent.minWidth*i.guiScale()&&(e=this.parent.minWidth*i.guiScale()),e>this.parent.maxWidth*i.guiScale()&&(e=this.parent.maxWidth*i.guiScale()),s<this.parent.minHeight*i.guiScale()&&(s=this.parent.minHeight*i.guiScale()),s>this.parent.maxHeight*i.guiScale()&&(s=this.parent.maxHeight*i.guiScale()),this.downW!==e&&this.parent.changeWidth(e),window.signals&&signals.windowResize.dispatch()}.bind(s)),void 0===s._onPointerUp&&(s._onPointerUp=function(t){!1!==t.isPrimary&&(this.dom.ownerDocument.removeEventListener("pointermove",this._onPointerMove),this.dom.ownerDocument.removeEventListener("pointerup",this._onPointerUp))}.bind(s)),s.dom.addEventListener("pointerdown",s._onPointerDown,!1),s.setPointerEvents("auto")):e||!0!==s.resizeEnabled||(s.dom.removeEventListener("pointerdown",s._onPointerDown),s.setPointerEvents("none")),s.resizeEnabled=e,this}}const Q={LEFT:"left",RIGHT:"right"};class tt extends J{constructor(t,e=Q.RIGHT){super(t);const s=this;this.setName("Tabbed"),this.addClass("Tabbed"),this.tabs=[],this.panels=[],this.selectedId="",this.selectedCount=0,this.tabsDiv=(new g).setClass("Tabs").setDisplay("none"),this.panelsDiv=(new g).setClass("TabPanels"),this.add(this.tabsDiv),this.add(this.panelsDiv),this.setTabSide(e),this.addTab=function(t,e,n,i){let o=0;for(let e=0;e<s.tabs.length;e++){s.tabs[e].dom.id===t&&o++}const r=function(t){const e=String(t).split(" ");for(let t=0;t<e.length;t++)e[t]=e[t][0].toUpperCase()+e[t].substring(1);return e.join(" ")}(t),a=new et(s,r,n,i);a.setId(t),a.count=o,s.tabs.push(a),s.tabsDiv.add(a),s.tabs.length>0&&s.tabsDiv.setDisplay("");const l=(new Z).setId(t).addClass("Titled").addClass("Hidden").add(e);return l.count=o,s.panels.push(l),s.panelsDiv.add(l),s.setContentsStyle("minHeight",""),(s.tabsDiv.hasClass("LeftSide")||s.tabsDiv.hasClass("RightSide"))&&s.setContentsStyle("minHeight",2.2*s.tabs.length+.4+"em"),a}}selectFirst(){return this.tabs.length>0&&this.selectTab(this.tabs[0].getId())}selectLastKnownTab(){}selectTab(t,e=0,s=!1){if(null==this.tabs)return this;const n=this;!0!==s&&i.setVariable("--tab-timing","0");const o=this.tabs.find((function(s){return s.dom.id===t&&s.count===e})),r=this.panels.find((function(s){return s.dom.id===t&&s.count===e}));if(o&&r){const a=this.tabs.find((function(t){return t.dom.id===n.selectedId&&t.count===n.selectedCount})),l=this.panels.find((function(t){return t.dom.id===n.selectedId&&t.count===n.selectedCount}));if(a&&a.removeClass("Selected"),l&&l.addClass("Hidden"),o.addClass("Selected"),r.removeClass("Hidden"),this.selectedId=t,this.selectedCount=e,s){const e=new Event("tab-changed");e.value=t,this.dom.dispatchEvent(e)}return!0!==s&&setTimeout((()=>{i.setVariable("--tab-timing","200ms")}),50),!0}return!1}destroy(){this.clearTabs(),super.destroy()}clearTabs(){if(this.tabsDiv&&this.tabsDiv.clearContents(),this.panelsDiv&&this.panelsDiv.clearContents(),this.tabs){for(let t=0;t<this.tabs.length;t++)this.tabs[t].destroy();this.tabs.length=0}if(this.panels){for(let t=0;t<this.panels.length;t++)this.panels[t].destroy();this.panels.length=0}this.setStyle("minHeight","")}currentId(){return this.selectedId}setTabSide(t){t=String(t).toLowerCase(),this.tabsDiv.removeClass("LeftSide"),this.tabsDiv.removeClass("RightSide"),t===Q.RIGHT?this.tabsDiv.addClass("RightSide"):this.tabsDiv.addClass("LeftSide")}tabIndex(t){return this.tabs.indexOf(t)}}class et extends g{constructor(t,e,s,n){super();const i=this;if(this.setClass("Tab"),this.setCursor("default"),this.iconVector=new S(s),this.iconBorder=(new g).setClass("TabIcon"),this.add(this.iconVector,this.iconBorder),this.setLabel=function(t){i.iconBorder.dom.setAttribute("tooltip",t)},this.setLabel(e),null!=n){let t,e,s,i;if(t=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(n)){let n;const o=t[1],r=t[2];switch(o){case"rgb":case"rgba":(n=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))&&(e=Math.min(255,parseInt(n[1],10)),s=Math.min(255,parseInt(n[2],10)),i=Math.min(255,parseInt(n[3],10))),(n=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))&&(e=Math.min(100,parseInt(n[1],10))/100,s=Math.min(100,parseInt(n[2],10))/100,i=Math.min(100,parseInt(n[3],10))/100)}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(n)){const n=t[1],o=n.length;3===o?(e=parseInt(n.charAt(0)+n.charAt(0),16),s=parseInt(n.charAt(1)+n.charAt(1),16),i=parseInt(n.charAt(2)+n.charAt(2),16)):6===o&&(e=parseInt(n.charAt(0)+n.charAt(1),16),s=parseInt(n.charAt(2)+n.charAt(3),16),i=parseInt(n.charAt(4)+n.charAt(5),16))}else{const t=Math.min(Math.max(Math.floor(n),0),16777215);e=(16711680&t)>>16,s=(65280&t)>>8,i=255&t}const o=`linear-gradient(to bottom left, ${`rgb(${e}, ${s}, ${i})`}, ${`rgb(${parseInt(.75*e)}, ${parseInt(.75*s)}, ${parseInt(.75*i)})`})`;this.iconVector.setStyle("background-image",o)}this.onClick((function(){t.selectTab(i.dom.id,i.count,!0),window.signals&&signals.windowResize.dispatch()}))}}const st={TOP_LEFT:"TopLeft",TOP_RIGHT:"TopRight",BOTTOM_LEFT:"BottomLeft",BOTTOM_RIGHT:"BottomRight"};class nt extends g{constructor(){super();const t={};let e=1;for(let s in st){const n=st[s],i=`Docker${n}`,o=(new g).addClass("DockerCorner").addClass(i);o.setStyle("zIndex",`${e}`),e++;let r=!1;o.dom.addEventListener("pointerdown",(t=>r=!0)),o.dom.addEventListener("pointerup",(function(e){if(r){for(let e in t){let s=getComputedStyle(t[e].dom).getPropertyValue("z-index");s>1&&s--,t[e].setStyle("zIndex",`${s}`)}o.setStyle("zIndex",`${Object.keys(t).length}`)}r=!1})),t[n]=o,this.add(o)}function s(){let e=0;for(let s=0;s<t[st.BOTTOM_LEFT].children.length;s++)e+=t[st.BOTTOM_LEFT].children[s].getHeight();let s=parseFloat(i.toEm(e))-.175;t[st.TOP_LEFT].setStyle("bottom",`${s}em`)}this.addDock=function(e,s=st.TOP_LEFT){t[s].add(e),e.isElement&&e.hasClass("Tabbed")&&(s.includes("Right")&&e.setTabSide(Q.LEFT),s.includes("Left")&&e.setTabSide(Q.RIGHT)),e.isElement&&e.hasClass("Resizeable")&&(e.toggleResize(q.LEFT,s.includes("Right")),e.toggleResize(q.RIGHT,s.includes("Left")),e.toggleResize(q.TOP_LEFT,s.includes("BottomRight")),e.toggleResize(q.TOP_RIGHT,s.includes("BottomLeft")),e.toggleResize(q.BOTTOM_RIGHT,s.includes("TopLeft")),e.toggleResize(q.BOTTOM_LEFT,s.includes("TopRight")))},signals.windowResize.add(s),this.dom.addEventListener("destroy",(function(){signals.windowResize.remove(s)}),{once:!0})}}class it extends h{constructor(){super(document.createElement("div")),this.addClass("FlexBox")}}class ot extends x{constructor(){super(),this.setFlex("1 1 auto"),this.setStyle("minHeight","0.01em")}}class rt extends g{constructor(){super(),this.setClass("MenuSeparator")}}class at extends D{constructor(t,e){switch(super(t),this.addClass("ToolbarButton"),e){case"left":this.addClass("ButtonLeft");break;case"middle":this.addClass("ButtonMiddle");break;case"right":this.addClass("ButtonRight")}const s=new $;this.add(s),this.contents=function(){return s}}}class lt extends h{constructor(){super(document.createElement("div")),this.setClass("ToolbarSeparator")}}class dt extends Z{constructor(t){super(t),this.addClass("Draggable"),this.makeClosable(X.RIGHT,1.3,-1.9)}}class ht extends Z{constructor(t="",e=""){super();const s=this;this.addClass("Shrinkable"),this.titleDiv=void 0,this.bodyDiv=void 0;const n=(new x).setClass("ShrinkIcon").add(new S(e)),i=(new x).setClass("ShrinkText").setInnerHtml(t),o=(new g).setClass("ShrinkTitle");o.add(n,i,(new x).setClass("ShrinkArrow"));const r=(new g).setClass("ShrinkBody");this.add(o,r),this.titleDiv=o,this.bodyDiv=r,this.contents=function(){return s.bodyDiv},this.setExpanded(!0),o.onClick((function(){s.toggle()}))}setExpanded(t=!0){this.isExpanded=t,t?this.addClass("Expanded"):this.removeClass("Expanded")}sort(){const t=this.contents().children;t.sort(((t,e)=>t.name<e.name?-1:t.name>e.name?1:0));for(let e=0;e<t.length;e++)t[e].setStyle("order",e)}toggle(){this.setExpanded(!this.isExpanded)}}class ct extends g{constructor(t){super(),this.addClass("Titled"),this.tabTitle=new g(t).addClass("TabTitle"),t&&""!==t&&this.add(this.tabTitle),this.scroller=(new g).addClass("Scroller"),this.add(this.scroller),this.contents=function(){return this.scroller}}}export{o as ALIGN,U as AbsoluteBox,G as AssetBox,b as Break,D as Button,X as CLOSE_SIDES,st as CORNERS,k as Checkbox,H as Color,i as Css,g as Div,nt as Docker,dt as Draggable,A as Dropdown,h as Element,it as FlexBox,K as FlexBreak,ot as FlexSpacer,d as Html,t as IMAGE_CHECK,e as IMAGE_CLOSE,s as IMAGE_EMPTY,E as Image,B as Menu,R as MenuItem,rt as MenuSeparator,P as MenuShortcut,F as NumberBox,O as NumberScroll,r as OVERFLOW,Y as PANEL_STYLES,a as POSITION,L as PROPERTY_SIZE,Z as Panel,l as Popper,I as PropertyList,q as RESIZERS,J as Resizeable,T as Row,$ as ShadowBox,ht as Shrinkable,z as Slider,x as Span,Q as TAB_SIDES,n as TOOLTIP_Y_OFFSET,tt as Tabbed,y as Text,W as TextArea,_ as TextBox,ct as Titled,at as ToolbarButton,lt as ToolbarSeparator,M as TreeList,S as VectorBox,w as tooltipper};
